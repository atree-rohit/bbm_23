import{g as h,m as f,e as S,_ as b,r as g,c as l,b as o,F as r,k as c,d,o as s,t as i,w as p,v as m,q as U,l as F,p as y,j as v,s as _,i as I,n as L,u as V}from"./_plugin-vue_export-helper-bf2d4590.js";import{F as A}from"./FileUploadComponent-ae9cf69e.js";const D=h({name:"ModalAddPartner",props:{show:{type:Boolean,default:!1}},components:{FileUploadComponent:A},emits:["close"],data(){return{form_questions:[{type:"text",label:"Name",name:"name",required:!0},{type:"select",label:"Partner Type",name:"partner_type",required:!0,options:[{label:"NGO",value:"ngo"},{label:"Research Organization",value:"research_organization"},{label:"School",value:"school"},{label:"College",value:"college"},{label:"University",value:"university"},{label:"Nature Club",value:"nature_club"},{label:"Social Media Group",value:"social_media_group"},{label:"Other",value:"other"}]},{type:"textarea",label:"Description",name:"description",required:!0},{type:"text",label:"Contact Person",name:"contact_person",required:!1},{type:"file",label:"Image",name:"image",required:!1},{type:"textarea",label:"Link",name:"link",required:!1}],form_data:{},upload_file_flag:!1}},created(){this.initFormData()},watch:{show(e){let t=document.querySelector("body");e==!0?t.classList.add("modal-open"):t.classList.remove("modal-open")}},computed:{...f({user:e=>e.auth.user})},methods:{...S({store:"partners/store"}),initFormData(){this.form_data={name:"",partner_type:"ngo",description:"",contact_person:"",image:"",link:"",user:this.user}},closeModal(){this.$emit("close")},handleUploadedFileId(e){this.form_data.image=e.data.id;try{this.store(this.form_data),this.initFormData(),this.closeModal(),this.upload_file_flag=!1}catch(t){console.error(t)}},submit(){this.upload_file_flag=!0}}}),k=e=>(y("data-v-681ee7e2"),e=e(),v(),e),N={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},B={class:"modal-dialog modal-lg"},z={class:"modal-content"},E={class:"modal-header"},O=k(()=>o("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Add Partner",-1)),T={class:"modal-body"},j=["for","textContent"],G=["onUpdate:modelValue","placeholder"],R=["onUpdate:modelValue","placeholder"],X=["onUpdate:modelValue"],H=k(()=>o("option",null,"Select Link Type",-1)),J=["value","textContent","selected"],K={class:"modal-footer"},Q={key:1,class:"modal-backdrop fade show"};function W(e,t,$,w,C,M){const u=g("file-upload-component");return s(),l(r,null,[e.show?(s(),l("div",N,[o("div",B,[o("div",z,[o("div",E,[O,o("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...a)=>e.closeModal&&e.closeModal(...a))})]),o("div",T,[o("form",{action:"javascript:void(0)",onSubmit:t[1]||(t[1]=(...a)=>e.submit&&e.submit(...a)),class:"row",method:"post"},[(s(!0),l(r,null,c(e.form_questions,a=>(s(),l("div",{key:a.name,class:"form-group col-12"},[o("label",{for:a.name,class:"font-weight-bold",textContent:i(a.label)},null,8,j),a.type=="text"?p((s(),l("input",{key:0,type:"text","onUpdate:modelValue":n=>e.form_data[a.name]=n,placeholder:`Enter ${a.name}`,class:"form-control"},null,8,G)),[[m,e.form_data[a.name]]]):a.type=="textarea"?p((s(),l("textarea",{key:1,"onUpdate:modelValue":n=>e.form_data[a.name]=n,placeholder:`Enter ${a.name}`,class:"form-control"},null,8,R)),[[m,e.form_data[a.name]]]):a.type=="select"?p((s(),l("select",{key:2,"onUpdate:modelValue":n=>e.form_data[a.name]=n,class:"form-select"},[H,(s(!0),l(r,null,c(a.options,n=>(s(),l("option",{key:n.value,value:n.value,textContent:i(n.label),selected:n.value=="newspaper_print"},null,8,J))),128))],8,X)),[[U,e.form_data[a.name]]]):a.type=="file"?(s(),F(u,{key:3,class:"form-control",type:"file",upload_file:e.upload_file_flag,folder:"partners",onUploaded_file_id:e.handleUploadedFileId},null,8,["upload_file","onUploaded_file_id"])):d("",!0)]))),128))],32)]),o("div",K,[o("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=(...a)=>e.closeModal&&e.closeModal(...a))},"Close"),o("button",{type:"button",class:"btn btn-success",onClick:t[3]||(t[3]=(...a)=>e.submit&&e.submit(...a))},"Save changes")])])])])):d("",!0),e.show?(s(),l("div",Q)):d("",!0)],64)}const Y=b(D,[["render",W],["__scopeId","data-v-681ee7e2"]]);const Z=h({name:"Partners",components:{ModalAddPartner:Y},data(){return{show_modal:!1}},computed:{...f({user:e=>e.auth.user,all_data:e=>e.partners.all_data})},mounted(){_.dispatch("partners/getAllData")},methods:{gotoLink(e){window.open(e,"_blank")},get_tags(e){return e.split(",").map(t=>t.trim())},badgeColor(e){switch(e){case"ngo":return"bg-info";case"research_organization":return"bg-info";case"school":return"bg-warning";case"college":return"bg-warning";case"university":return"bg-warning";case"nature_club":return"bg-success";case"social_media_group":return"bg-primary";case"other":return"bg-danger"}},deletePartner(e){confirm("Are you sure you want to delete this partner?")&&_.dispatch("partners/delete",e)}}}),q=e=>(y("data-v-fb103153"),e=e(),v(),e),x={class:"header d-flex px-2"},ee=q(()=>o("div",{class:"h1"},"Partners",-1)),ae={key:0},te={class:"main-container m-4"},oe=["onClick"],se=["src"],le={class:"card-body"},ne={class:"card-title"},re=["onClick"],de={key:0,class:"card-div-tags"},ie=["textContent"];function ce(e,t,$,w,C,M){const u=g("modal-add-partner");return s(),l(r,null,[o("div",x,[ee,e.user&&(e.user.user_type=="super_admin"||e.user.user_type=="admin")?(s(),l("div",ae,[o("button",{class:"btn btn-lg btn-success mx-5",onClick:t[0]||(t[0]=a=>e.show_modal=!0),title:"Add Partner"},"+")])):d("",!0)]),o("div",te,[(s(!0),l(r,null,c(e.all_data,a=>(s(),l("div",{class:"card",key:a.id,onClick:n=>e.gotoLink(a.link)},[o("img",{src:a.image_path,class:"card-img-top"},null,8,se),o("div",le,[o("h5",ne,i(a.name),1),o("span",{class:L(["card-badge badge",e.badgeColor(a.partner_type)])},i(a.partner_type),3),e.user.user_type=="super_admin"?(s(),l("span",{key:0,class:"card-delete badge bg-danger",onClick:V(n=>e.deletePartner(a.id),["stop"])}," X ",8,re)):d("",!0)]),a.tags?(s(),l("div",de,[(s(!0),l(r,null,c(e.get_tags(a.tags),(n,P)=>(s(),l("span",{key:P,textContent:i(n),class:"card-div-tag badge rounded-pill bg-secondary me-2 px-3 py-2"},null,8,ie))),128))])):d("",!0)],8,oe))),128))]),I(u,{show:e.show_modal,onClose:t[1]||(t[1]=a=>e.show_modal=!1)},null,8,["show"])],64)}const me=b(Z,[["render",ce],["__scopeId","data-v-fb103153"]]);export{me as P};
