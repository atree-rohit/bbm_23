import{g as b,m as f,e as U,_ as y,r as h,c as s,b as o,F as i,i as m,d,o as l,t as c,w as u,v as _,q as L,l as I,p as v,k as g,s as P,h as E,j as M,n as N,u as S}from"./_plugin-vue_export-helper-b3b250ef.js";import{F as A}from"./FileUploadComponent-c9f05cb9.js";const O=b({name:"ModalAddPartner",props:{show:{type:Boolean,default:!1}},components:{FileUploadComponent:A},emits:["close"],data(){return{form_questions:[{type:"text",label:"Name",name:"name",required:!0},{type:"select",label:"Partner Type",name:"partner_type",required:!0,options:[{label:"NGO",value:"ngo"},{label:"Research Organization",value:"research_organization"},{label:"School",value:"school"},{label:"College",value:"college"},{label:"University",value:"university"},{label:"Nature Club",value:"nature_club"},{label:"Social Media Group",value:"social_media_group"},{label:"Other",value:"other"}]},{type:"textarea",label:"Description",name:"description",required:!0},{type:"text",label:"Contact Person",name:"contact_person",required:!1},{type:"file",label:"Image",name:"image",required:!1},{type:"textarea",label:"Link",name:"link",required:!1}],form_data:{},upload_file_flag:!1}},created(){this.initFormData()},watch:{show(e){let a=document.querySelector("body");e==!0?a.classList.add("modal-open"):a.classList.remove("modal-open")}},computed:{...f({user:e=>e.auth.user})},methods:{...U({store:"partners/store"}),initFormData(){this.form_data={name:"",partner_type:"ngo",description:"",contact_person:"",image:"",link:"",user:this.user}},closeModal(){this.$emit("close")},handleUploadedFileId(e){this.form_data.image=e.data.id;try{this.store(this.form_data),this.initFormData(),this.closeModal(),this.upload_file_flag=!1}catch(a){console.error(a)}},submit(){this.upload_file_flag=!0}}}),V=e=>(v("data-v-681ee7e2"),e=e(),g(),e),z={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},B={class:"modal-dialog modal-lg"},T={class:"modal-content"},j={class:"modal-header"},G=V(()=>o("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Add Partner",-1)),R={class:"modal-body"},X=["for","textContent"],H=["onUpdate:modelValue","placeholder"],J=["onUpdate:modelValue","placeholder"],K=["onUpdate:modelValue"],Q=V(()=>o("option",null,"Select Link Type",-1)),W=["value","textContent","selected"],Y={class:"modal-footer"},Z={key:1,class:"modal-backdrop fade show"};function x(e,a,$,k,w,C){const n=h("file-upload-component");return l(),s(i,null,[e.show?(l(),s("div",z,[o("div",B,[o("div",T,[o("div",j,[G,o("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=(...t)=>e.closeModal&&e.closeModal(...t))})]),o("div",R,[o("form",{action:"javascript:void(0)",onSubmit:a[1]||(a[1]=(...t)=>e.submit&&e.submit(...t)),class:"row",method:"post"},[(l(!0),s(i,null,m(e.form_questions,t=>(l(),s("div",{key:t.name,class:"form-group col-12"},[o("label",{for:t.name,class:"font-weight-bold",textContent:c(t.label)},null,8,X),t.type=="text"?u((l(),s("input",{key:0,type:"text","onUpdate:modelValue":r=>e.form_data[t.name]=r,placeholder:`Enter ${t.name}`,class:"form-control"},null,8,H)),[[_,e.form_data[t.name]]]):t.type=="textarea"?u((l(),s("textarea",{key:1,"onUpdate:modelValue":r=>e.form_data[t.name]=r,placeholder:`Enter ${t.name}`,class:"form-control"},null,8,J)),[[_,e.form_data[t.name]]]):t.type=="select"?u((l(),s("select",{key:2,"onUpdate:modelValue":r=>e.form_data[t.name]=r,class:"form-select"},[Q,(l(!0),s(i,null,m(t.options,r=>(l(),s("option",{key:r.value,value:r.value,textContent:c(r.label),selected:r.value=="newspaper_print"},null,8,W))),128))],8,K)),[[L,e.form_data[t.name]]]):t.type=="file"?(l(),I(n,{key:3,class:"form-control",type:"file",upload_file:e.upload_file_flag,folder:"partners",onUploaded_file_id:e.handleUploadedFileId},null,8,["upload_file","onUploaded_file_id"])):d("",!0)]))),128))],32)]),o("div",Y,[o("button",{type:"button",class:"btn btn-secondary",onClick:a[2]||(a[2]=(...t)=>e.closeModal&&e.closeModal(...t))},"Close"),o("button",{type:"button",class:"btn btn-success",onClick:a[3]||(a[3]=(...t)=>e.submit&&e.submit(...t))},"Save changes")])])])])):d("",!0),e.show?(l(),s("div",Z)):d("",!0)],64)}const q=y(O,[["render",x],["__scopeId","data-v-681ee7e2"]]);const ee=b({name:"ModalEditPartner",props:{show:{type:Boolean,default:!1},data:{type:Object,default:()=>{}}},emits:["close"],data(){return{form_questions:[{type:"text",label:"Name",name:"name",required:!0},{type:"select",label:"Partner Type",name:"partner_type",required:!0,options:[{label:"NGO",value:"ngo"},{label:"Research Organization",value:"research_organization"},{label:"School",value:"school"},{label:"College",value:"college"},{label:"University",value:"university"},{label:"Nature Club",value:"nature_club"},{label:"Social Media Group",value:"social_media_group"},{label:"Other",value:"other"}]},{type:"textarea",label:"Description",name:"description",required:!0},{type:"text",label:"Contact Person",name:"contact_person",required:!1},{type:"textarea",label:"Link",name:"link",required:!1}],form_data:{},upload_file_flag:!1}},created(){this.initFormData()},watch:{show(e){let a=document.querySelector("body");e==!0?a.classList.add("modal-open"):a.classList.remove("modal-open")}},computed:{...f({user:e=>e.auth.user})},methods:{...U({update:"partners/update"}),initFormData(){this.form_data={id:this.data.id,name:this.data.name,partner_type:this.data.partner_type,description:this.data.description,contact_person:this.data.contact_person,image:this.data.image,link:this.data.link,user:this.data.user}},closeModal(){this.$emit("close")},submit(){try{this.update(this.form_data),this.initFormData(),this.closeModal()}catch(e){console.error(e)}}}}),D=e=>(v("data-v-32d9988b"),e=e(),g(),e),te={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},ae={class:"modal-dialog modal-lg"},oe={class:"modal-content"},le={class:"modal-header"},se=D(()=>o("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Edit Partner",-1)),ne={class:"modal-body"},re=["for","textContent"],de=["onUpdate:modelValue","placeholder"],ie=["onUpdate:modelValue","placeholder"],ce=["onUpdate:modelValue"],ue=D(()=>o("option",null,"Select Link Type",-1)),me=["value","textContent","selected"],pe={class:"modal-footer"},_e={key:1,class:"modal-backdrop fade show"};function he(e,a,$,k,w,C){return l(),s(i,null,[e.show?(l(),s("div",te,[o("div",ae,[o("div",oe,[o("div",le,[se,o("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=(...n)=>e.closeModal&&e.closeModal(...n))})]),o("div",ne,[o("form",{action:"javascript:void(0)",onSubmit:a[1]||(a[1]=(...n)=>e.submit&&e.submit(...n)),class:"row",method:"post"},[(l(!0),s(i,null,m(e.form_questions,n=>(l(),s("div",{key:n.name,class:"form-group col-12"},[o("label",{for:n.name,class:"font-weight-bold",textContent:c(n.label)},null,8,re),n.type=="text"?u((l(),s("input",{key:0,type:"text","onUpdate:modelValue":t=>e.form_data[n.name]=t,placeholder:`Enter ${n.name}`,class:"form-control"},null,8,de)),[[_,e.form_data[n.name]]]):n.type=="textarea"?u((l(),s("textarea",{key:1,"onUpdate:modelValue":t=>e.form_data[n.name]=t,placeholder:`Enter ${n.name}`,class:"form-control"},null,8,ie)),[[_,e.form_data[n.name]]]):n.type=="select"?u((l(),s("select",{key:2,"onUpdate:modelValue":t=>e.form_data[n.name]=t,class:"form-select"},[ue,(l(!0),s(i,null,m(n.options,t=>(l(),s("option",{key:t.value,value:t.value,textContent:c(t.label),selected:t.value=="newspaper_print"},null,8,me))),128))],8,ce)),[[L,e.form_data[n.name]]]):d("",!0)]))),128))],32)]),o("div",pe,[o("button",{type:"button",class:"btn btn-secondary",onClick:a[2]||(a[2]=(...n)=>e.closeModal&&e.closeModal(...n))},"Close"),o("button",{type:"button",class:"btn btn-success",onClick:a[3]||(a[3]=(...n)=>e.submit&&e.submit(...n))},"Save changes")])])])])):d("",!0),e.show?(l(),s("div",_e)):d("",!0)],64)}const be=y(ee,[["render",he],["__scopeId","data-v-32d9988b"]]);const fe=b({name:"Partners",components:{ModalAddPartner:q,ModalEditPartner:be},data(){return{show_modal:{add:!1,edit:!1},selectedPartner:{}}},computed:{...f({user:e=>e.auth.user,all_data:e=>e.partners.all_data,is_admin:e=>e.auth.is_admin,is_super_admin:e=>e.auth.is_super_admin})},mounted(){P.dispatch("partners/getAllData")},methods:{gotoLink(e){e&&(this.is_admin||this.is_super_admin?confirm("Do you want to visit the partner URL?")&&window.open(e,"_blank"):window.open(e,"_blank"))},get_tags(e){return e.split(",").map(a=>a.trim())},badgeColor(e){switch(e){case"ngo":return"bg-info";case"research_organization":return"bg-info";case"school":return"bg-warning";case"college":return"bg-warning";case"university":return"bg-warning";case"nature_club":return"bg-success";case"social_media_group":return"bg-primary";case"other":return"bg-danger"}},editPartner(e){this.selectedPartner=this.all_data.find(a=>a.id==e),this.show_modal.edit=!0},deletePartner(e){confirm("Are you sure you want to delete this partner?")&&P.dispatch("partners/delete",e)}}}),ye=e=>(v("data-v-c31e1a48"),e=e(),g(),e),ve={class:"header d-flex px-2"},ge=ye(()=>o("div",{class:"h1"},"Partners",-1)),$e={key:0},ke={class:"main-container m-4"},we=["onClick"],Ce=["src"],Pe={class:"card-body"},Me={class:"card-title"},Se={class:"hover-btns"},Ue=["onClick"],Le=["onClick"],Ve={key:0,class:"card-div-tags"},De=["textContent"];function Fe(e,a,$,k,w,C){const n=h("modal-add-partner"),t=h("modal-edit-partner");return l(),s(i,null,[o("div",ve,[E(c(e.selectedPartner)+" ",1),ge,e.user&&(e.user.user_type=="super_admin"||e.user.user_type=="admin")?(l(),s("div",$e,[o("button",{class:"btn btn-lg btn-success mx-5",onClick:a[0]||(a[0]=r=>e.show_modal.add=!0),title:"Add Partner"},"+")])):d("",!0)]),o("div",ke,[(l(!0),s(i,null,m(e.all_data,r=>(l(),s("div",{class:"card",key:r.id,onClick:p=>e.gotoLink(r.link)},[o("img",{src:r.image_path,class:"card-img-top"},null,8,Ce),o("div",Pe,[o("h5",Me,c(r.name),1),o("span",{class:N(["card-badge badge",e.badgeColor(r.partner_type)])},c(r.partner_type),3),o("div",Se,[e.user.user_type=="super_admin"?(l(),s("span",{key:0,class:"card-edit badge bg-primary",onClick:S(p=>e.editPartner(r.id),["stop"]),title:"Edit Partner",textContent:"✎"},null,8,Ue)):d("",!0),e.user.user_type=="super_admin"?(l(),s("span",{key:1,class:"card-delete badge bg-danger",onClick:S(p=>e.deletePartner(r.id),["stop"]),title:"Delete Partner",textContent:"X"},null,8,Le)):d("",!0)])]),r.tags?(l(),s("div",Ve,[(l(!0),s(i,null,m(e.get_tags(r.tags),(p,F)=>(l(),s("span",{key:F,textContent:c(p),class:"card-div-tag badge rounded-pill bg-secondary me-2 px-3 py-2"},null,8,De))),128))])):d("",!0)],8,we))),128))]),M(n,{show:e.show_modal.add,onClose:a[1]||(a[1]=r=>e.show_modal.add=!1)},null,8,["show"]),M(t,{show:e.show_modal.edit,data:e.selectedPartner,onClose:a[2]||(a[2]=r=>e.show_modal.edit=!1)},null,8,["show","data"])],64)}const Ne=y(fe,[["render",Fe],["__scopeId","data-v-c31e1a48"]]);export{Ne as P};
