import{g as b,m as f,e as U,_ as y,r as h,c as s,b as o,F as i,i as m,d as r,o as l,t as c,w as u,v as _,q as L,l as I,p as v,k as g,s as P,j as M,n as E,u as S}from"./_plugin-vue_export-helper-5f9bfec6.js";import{F as N}from"./FileUploadComponent-f9cc15af.js";const A=b({name:"ModalAddPartner",props:{show:{type:Boolean,default:!1}},components:{FileUploadComponent:N},emits:["close"],data(){return{form_questions:[{type:"text",label:"Name",name:"name",required:!0},{type:"select",label:"Partner Type",name:"partner_type",required:!0,options:[{label:"NGO",value:"ngo"},{label:"Research Organization",value:"research_organization"},{label:"School",value:"school"},{label:"College",value:"college"},{label:"University",value:"university"},{label:"Nature Club",value:"nature_club"},{label:"Social Media Group",value:"social_media_group"},{label:"Other",value:"other"}]},{type:"textarea",label:"Description",name:"description",required:!0},{type:"text",label:"Contact Person",name:"contact_person",required:!1},{type:"file",label:"Image",name:"image",required:!1},{type:"textarea",label:"Link",name:"link",required:!1}],form_data:{},upload_file_flag:!1}},created(){this.initFormData()},watch:{show(e){let a=document.querySelector("body");e==!0?a.classList.add("modal-open"):a.classList.remove("modal-open")}},computed:{...f({user:e=>e.auth.user})},methods:{...U({store:"partners/store"}),initFormData(){this.form_data={name:"",partner_type:"ngo",description:"",contact_person:"",image:"",link:"",user:this.user}},closeModal(){this.$emit("close")},handleUploadedFileId(e){this.form_data.image=e.data.id;try{this.store(this.form_data),this.initFormData(),this.closeModal(),this.upload_file_flag=!1}catch(a){console.error(a)}},submit(){this.upload_file_flag=!0}}}),V=e=>(v("data-v-681ee7e2"),e=e(),g(),e),O={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},z={class:"modal-dialog modal-lg"},B={class:"modal-content"},T={class:"modal-header"},j=V(()=>o("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Add Partner",-1)),G={class:"modal-body"},R=["for","textContent"],X=["onUpdate:modelValue","placeholder"],H=["onUpdate:modelValue","placeholder"],J=["onUpdate:modelValue"],K=V(()=>o("option",null,"Select Link Type",-1)),Q=["value","textContent","selected"],W={class:"modal-footer"},Y={key:1,class:"modal-backdrop fade show"};function Z(e,a,$,k,w,C){const n=h("file-upload-component");return l(),s(i,null,[e.show?(l(),s("div",O,[o("div",z,[o("div",B,[o("div",T,[j,o("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=(...t)=>e.closeModal&&e.closeModal(...t))})]),o("div",G,[o("form",{action:"javascript:void(0)",onSubmit:a[1]||(a[1]=(...t)=>e.submit&&e.submit(...t)),class:"row",method:"post"},[(l(!0),s(i,null,m(e.form_questions,t=>(l(),s("div",{key:t.name,class:"form-group col-12"},[o("label",{for:t.name,class:"font-weight-bold",textContent:c(t.label)},null,8,R),t.type=="text"?u((l(),s("input",{key:0,type:"text","onUpdate:modelValue":d=>e.form_data[t.name]=d,placeholder:`Enter ${t.name}`,class:"form-control"},null,8,X)),[[_,e.form_data[t.name]]]):t.type=="textarea"?u((l(),s("textarea",{key:1,"onUpdate:modelValue":d=>e.form_data[t.name]=d,placeholder:`Enter ${t.name}`,class:"form-control"},null,8,H)),[[_,e.form_data[t.name]]]):t.type=="select"?u((l(),s("select",{key:2,"onUpdate:modelValue":d=>e.form_data[t.name]=d,class:"form-select"},[K,(l(!0),s(i,null,m(t.options,d=>(l(),s("option",{key:d.value,value:d.value,textContent:c(d.label),selected:d.value=="newspaper_print"},null,8,Q))),128))],8,J)),[[L,e.form_data[t.name]]]):t.type=="file"?(l(),I(n,{key:3,class:"form-control",type:"file",upload_file:e.upload_file_flag,folder:"partners",onUploaded_file_id:e.handleUploadedFileId},null,8,["upload_file","onUploaded_file_id"])):r("",!0)]))),128))],32)]),o("div",W,[o("button",{type:"button",class:"btn btn-secondary",onClick:a[2]||(a[2]=(...t)=>e.closeModal&&e.closeModal(...t))},"Close"),o("button",{type:"button",class:"btn btn-success",onClick:a[3]||(a[3]=(...t)=>e.submit&&e.submit(...t))},"Save changes")])])])])):r("",!0),e.show?(l(),s("div",Y)):r("",!0)],64)}const x=y(A,[["render",Z],["__scopeId","data-v-681ee7e2"]]);const q=b({name:"ModalEditPartner",props:{show:{type:Boolean,default:!1},data:{type:Object,default:()=>{}}},emits:["close"],data(){return{form_questions:[{type:"text",label:"Name",name:"name",required:!0},{type:"select",label:"Partner Type",name:"partner_type",required:!0,options:[{label:"NGO",value:"ngo"},{label:"Research Organization",value:"research_organization"},{label:"School",value:"school"},{label:"College",value:"college"},{label:"University",value:"university"},{label:"Nature Club",value:"nature_club"},{label:"Social Media Group",value:"social_media_group"},{label:"Other",value:"other"}]},{type:"textarea",label:"Description",name:"description",required:!0},{type:"text",label:"Contact Person",name:"contact_person",required:!1},{type:"textarea",label:"Link",name:"link",required:!1}],form_data:{},upload_file_flag:!1}},created(){this.initFormData()},watch:{show(e){this.initFormData();let a=document.querySelector("body");e==!0?a.classList.add("modal-open"):a.classList.remove("modal-open")}},computed:{...f({user:e=>e.auth.user})},methods:{...U({update:"partners/update"}),initFormData(){this.form_data={id:this.data.id,name:this.data.name,partner_type:this.data.partner_type,description:this.data.description,contact_person:this.data.contact_person,image:this.data.image,link:this.data.link,user:this.data.user}},closeModal(){this.$emit("close")},submit(){try{this.update(this.form_data),this.initFormData(),this.closeModal()}catch(e){console.error(e)}}}}),D=e=>(v("data-v-c8fcdb3b"),e=e(),g(),e),ee={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},te={class:"modal-dialog modal-lg"},ae={class:"modal-content"},oe={class:"modal-header"},le=D(()=>o("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Edit Partner",-1)),se={class:"modal-body"},ne=["for","textContent"],de=["onUpdate:modelValue","placeholder"],re=["onUpdate:modelValue","placeholder"],ie=["onUpdate:modelValue"],ce=D(()=>o("option",null,"Select Link Type",-1)),ue=["value","textContent","selected"],me={class:"modal-footer"},pe={key:1,class:"modal-backdrop fade show"};function _e(e,a,$,k,w,C){return l(),s(i,null,[e.show?(l(),s("div",ee,[o("div",te,[o("div",ae,[o("div",oe,[le,o("button",{type:"button",class:"btn-close",onClick:a[0]||(a[0]=(...n)=>e.closeModal&&e.closeModal(...n))})]),o("div",se,[o("form",{action:"javascript:void(0)",onSubmit:a[1]||(a[1]=(...n)=>e.submit&&e.submit(...n)),class:"row",method:"post"},[(l(!0),s(i,null,m(e.form_questions,n=>(l(),s("div",{key:n.name,class:"form-group col-12"},[o("label",{for:n.name,class:"font-weight-bold",textContent:c(n.label)},null,8,ne),n.type=="text"?u((l(),s("input",{key:0,type:"text","onUpdate:modelValue":t=>e.form_data[n.name]=t,placeholder:`Enter ${n.name}`,class:"form-control"},null,8,de)),[[_,e.form_data[n.name]]]):n.type=="textarea"?u((l(),s("textarea",{key:1,"onUpdate:modelValue":t=>e.form_data[n.name]=t,placeholder:`Enter ${n.name}`,class:"form-control"},null,8,re)),[[_,e.form_data[n.name]]]):n.type=="select"?u((l(),s("select",{key:2,"onUpdate:modelValue":t=>e.form_data[n.name]=t,class:"form-select"},[ce,(l(!0),s(i,null,m(n.options,t=>(l(),s("option",{key:t.value,value:t.value,textContent:c(t.label),selected:t.value=="newspaper_print"},null,8,ue))),128))],8,ie)),[[L,e.form_data[n.name]]]):r("",!0)]))),128))],32)]),o("div",me,[o("button",{type:"button",class:"btn btn-secondary",onClick:a[2]||(a[2]=(...n)=>e.closeModal&&e.closeModal(...n))},"Close"),o("button",{type:"button",class:"btn btn-success",onClick:a[3]||(a[3]=(...n)=>e.submit&&e.submit(...n))},"Save changes")])])])])):r("",!0),e.show?(l(),s("div",pe)):r("",!0)],64)}const he=y(q,[["render",_e],["__scopeId","data-v-c8fcdb3b"]]);const be=b({name:"Partners",components:{ModalAddPartner:x,ModalEditPartner:he},data(){return{show_modal:{add:!1,edit:!1},selectedPartner:{}}},computed:{...f({user:e=>e.auth.user,all_data:e=>e.partners.all_data,is_admin:e=>e.auth.is_admin,is_super_admin:e=>e.auth.is_super_admin})},mounted(){P.dispatch("partners/getAllData")},methods:{gotoLink(e){e&&(this.is_admin||this.is_super_admin?confirm("Do you want to visit the partner URL?")&&window.open(e,"_blank"):window.open(e,"_blank"))},get_tags(e){return e.split(",").map(a=>a.trim())},badgeColor(e){switch(e){case"ngo":return"bg-info";case"research_organization":return"bg-info";case"school":return"bg-warning";case"college":return"bg-warning";case"university":return"bg-warning";case"nature_club":return"bg-success";case"social_media_group":return"bg-primary";case"other":return"bg-danger"}},editPartner(e){this.selectedPartner=this.all_data.find(a=>a.id==e),this.show_modal.edit=!0},deletePartner(e){confirm("Are you sure you want to delete this partner?")&&P.dispatch("partners/delete",e)}}}),fe=e=>(v("data-v-96fde70a"),e=e(),g(),e),ye={class:"header d-flex px-2"},ve=fe(()=>o("div",{class:"h1"},"Partners",-1)),ge={key:0},$e={class:"main-container m-4"},ke=["onClick"],we=["src"],Ce={class:"card-body"},Pe={class:"card-title"},Me={class:"hover-btns"},Se=["onClick"],Ue=["onClick"],Le={key:0,class:"card-div-tags"},Ve=["textContent"];function De(e,a,$,k,w,C){const n=h("modal-add-partner"),t=h("modal-edit-partner");return l(),s(i,null,[o("div",ye,[ve,e.user&&(e.user.user_type=="super_admin"||e.user.user_type=="admin")?(l(),s("div",ge,[o("button",{class:"btn btn-lg btn-success mx-5",onClick:a[0]||(a[0]=d=>e.show_modal.add=!0),title:"Add Partner"},"+")])):r("",!0)]),o("div",$e,[(l(!0),s(i,null,m(e.all_data,d=>(l(),s("div",{class:"card",key:d.id,onClick:p=>e.gotoLink(d.link)},[o("img",{src:d.image_path,class:"card-img-top"},null,8,we),o("div",Ce,[o("h5",Pe,c(d.name),1),o("span",{class:E(["card-badge badge",e.badgeColor(d.partner_type)])},c(d.partner_type),3),o("div",Me,[e.user.user_type=="super_admin"?(l(),s("span",{key:0,class:"card-edit badge bg-primary",onClick:S(p=>e.editPartner(d.id),["stop"]),title:"Edit Partner",textContent:"✎"},null,8,Se)):r("",!0),e.user.user_type=="super_admin"?(l(),s("span",{key:1,class:"card-delete badge bg-danger",onClick:S(p=>e.deletePartner(d.id),["stop"]),title:"Delete Partner",textContent:"X"},null,8,Ue)):r("",!0)])]),d.tags?(l(),s("div",Le,[(l(!0),s(i,null,m(e.get_tags(d.tags),(p,F)=>(l(),s("span",{key:F,textContent:c(p),class:"card-div-tag badge rounded-pill bg-secondary me-2 px-3 py-2"},null,8,Ve))),128))])):r("",!0)],8,ke))),128))]),M(n,{show:e.show_modal.add,onClose:a[1]||(a[1]=d=>e.show_modal.add=!1)},null,8,["show"]),M(t,{show:e.show_modal.edit,data:e.selectedPartner,onClose:a[2]||(a[2]=d=>e.show_modal.edit=!1)},null,8,["show","data"])],64)}const Ee=y(be,[["render",De],["__scopeId","data-v-96fde70a"]]);export{Ee as P};
