import{O as En,P as J,Q as un,R as on,S as Rn}from"./_plugin-vue_export-helper-1a0a936d.js";import{S as ln,r as Dn,e as P,a as fn,n as Fn,g as Bn,c as On,b as cn,d as qn,f as kn,h as An,j as $n,k as Pn,l as Wn}from"./viridis-3219c15f.js";function G(n,t){return n==null||t==null?NaN:n<t?-1:n>t?1:n>=t?0:NaN}function In(n,t){return n==null||t==null?NaN:t<n?-1:t>n?1:t>=n?0:NaN}function bn(n){let t,e,r;n.length!==2?(t=G,e=(o,f)=>G(n(o),f),r=(o,f)=>n(o)-f):(t=n===G||n===In?n:Vn,e=n,r=n);function i(o,f,l=0,h=o.length){if(l<h){if(t(f,f)!==0)return h;do{const s=l+h>>>1;e(o[s],f)<0?l=s+1:h=s}while(l<h)}return l}function u(o,f,l=0,h=o.length){if(l<h){if(t(f,f)!==0)return h;do{const s=l+h>>>1;e(o[s],f)<=0?l=s+1:h=s}while(l<h)}return l}function a(o,f,l=0,h=o.length){const s=i(o,f,l,h-1);return s>l&&r(o[s-1],f)>-r(o[s],f)?s-1:s}return{left:i,center:a,right:u}}function Vn(){return 0}function Gn(n){return n===null?NaN:+n}const Hn=bn(G),Xn=Hn.right;bn(Gn).center;const Qn=Xn,Un=Math.sqrt(50),Yn=Math.sqrt(10),Zn=Math.sqrt(2);function H(n,t,e){const r=(t-n)/Math.max(0,e),i=Math.floor(Math.log10(r)),u=r/Math.pow(10,i),a=u>=Un?10:u>=Yn?5:u>=Zn?2:1;let o,f,l;return i<0?(l=Math.pow(10,-i)/a,o=Math.round(n*l),f=Math.round(t*l),o/l<n&&++o,f/l>t&&--f,l=-l):(l=Math.pow(10,i)*a,o=Math.round(n/l),f=Math.round(t/l),o*l<n&&++o,f*l>t&&--f),f<o&&.5<=e&&e<2?H(n,t,e*2):[o,f,l]}function Jn(n,t,e){if(t=+t,n=+n,e=+e,!(e>0))return[];if(n===t)return[n];const r=t<n,[i,u,a]=r?H(t,n,e):H(n,t,e);if(!(u>=i))return[];const o=u-i+1,f=new Array(o);if(r)if(a<0)for(let l=0;l<o;++l)f[l]=(u-l)/-a;else for(let l=0;l<o;++l)f[l]=(u-l)*a;else if(a<0)for(let l=0;l<o;++l)f[l]=(i+l)/-a;else for(let l=0;l<o;++l)f[l]=(i+l)*a;return f}function K(n,t,e){return t=+t,n=+n,e=+e,H(n,t,e)[2]}function Kn(n,t,e){t=+t,n=+n,e=+e;const r=t<n,i=r?K(t,n,e):K(n,t,e);return(r?-1:1)*(i<0?1/-i:i)}function ge(n,t){let e;if(t===void 0)for(const r of n)r!=null&&(e<r||e===void 0&&r>=r)&&(e=r);else{let r=-1;for(let i of n)(i=t(i,++r,n))!=null&&(e<i||e===void 0&&i>=i)&&(e=i)}return e}function nt(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),i;return function(u){for(i=0;i<e;++i)r[i]=n[i]*(1-u)+t[i]*u;return r}}function tt(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function et(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,i=new Array(r),u=new Array(e),a;for(a=0;a<r;++a)i[a]=en(n[a],t[a]);for(;a<e;++a)u[a]=t[a];return function(o){for(a=0;a<r;++a)u[a]=i[a](o);return u}}function rt(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function it(n,t){var e={},r={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?e[i]=en(n[i],t[i]):r[i]=t[i];return function(u){for(i in e)r[i]=e[i](u);return r}}function en(n,t){var e=typeof t,r;return t==null||e==="boolean"?En(t):(e==="number"?J:e==="string"?(r=un(t))?(t=r,on):Rn:t instanceof un?on:t instanceof Date?rt:tt(t)?nt:Array.isArray(t)?et:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?it:J)(n,t)}function at(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function ut(n){return Math.abs(n=Math.round(n))>=1e21?n.toLocaleString("en").replace(/,/g,""):n.toString(10)}function X(n,t){if((e=(n=t?n.toExponential(t-1):n.toExponential()).indexOf("e"))<0)return null;var e,r=n.slice(0,e);return[r.length>1?r[0]+r.slice(2):r,+n.slice(e+1)]}function B(n){return n=X(Math.abs(n)),n?n[1]:NaN}function ot(n,t){return function(e,r){for(var i=e.length,u=[],a=0,o=n[0],f=0;i>0&&o>0&&(f+o+1>r&&(o=Math.max(1,r-f)),u.push(e.substring(i-=o,i+o)),!((f+=o+1)>r));)o=n[a=(a+1)%n.length];return u.reverse().join(t)}}function lt(n){return function(t){return t.replace(/[0-9]/g,function(e){return n[+e]})}}var ft=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Q(n){if(!(t=ft.exec(n)))throw new Error("invalid format: "+n);var t;return new rn({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Q.prototype=rn.prototype;function rn(n){this.fill=n.fill===void 0?" ":n.fill+"",this.align=n.align===void 0?">":n.align+"",this.sign=n.sign===void 0?"-":n.sign+"",this.symbol=n.symbol===void 0?"":n.symbol+"",this.zero=!!n.zero,this.width=n.width===void 0?void 0:+n.width,this.comma=!!n.comma,this.precision=n.precision===void 0?void 0:+n.precision,this.trim=!!n.trim,this.type=n.type===void 0?"":n.type+""}rn.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function ct(n){n:for(var t=n.length,e=1,r=-1,i;e<t;++e)switch(n[e]){case".":r=i=e;break;case"0":r===0&&(r=e),i=e;break;default:if(!+n[e])break n;r>0&&(r=0);break}return r>0?n.slice(0,r)+n.slice(i+1):n}var Nn;function st(n,t){var e=X(n,t);if(!e)return n+"";var r=e[0],i=e[1],u=i-(Nn=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return u===a?r:u>a?r+new Array(u-a+1).join("0"):u>0?r.slice(0,u)+"."+r.slice(u):"0."+new Array(1-u).join("0")+X(n,Math.max(0,t+u-1))[0]}function sn(n,t){var e=X(n,t);if(!e)return n+"";var r=e[0],i=e[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const dn={"%":(n,t)=>(n*100).toFixed(t),b:n=>Math.round(n).toString(2),c:n=>n+"",d:ut,e:(n,t)=>n.toExponential(t),f:(n,t)=>n.toFixed(t),g:(n,t)=>n.toPrecision(t),o:n=>Math.round(n).toString(8),p:(n,t)=>sn(n*100,t),r:sn,s:st,X:n=>Math.round(n).toString(16).toUpperCase(),x:n=>Math.round(n).toString(16)};function hn(n){return n}var mn=Array.prototype.map,gn=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function dt(n){var t=n.grouping===void 0||n.thousands===void 0?hn:ot(mn.call(n.grouping,Number),n.thousands+""),e=n.currency===void 0?"":n.currency[0]+"",r=n.currency===void 0?"":n.currency[1]+"",i=n.decimal===void 0?".":n.decimal+"",u=n.numerals===void 0?hn:lt(mn.call(n.numerals,String)),a=n.percent===void 0?"%":n.percent+"",o=n.minus===void 0?"−":n.minus+"",f=n.nan===void 0?"NaN":n.nan+"";function l(s){s=Q(s);var g=s.fill,k=s.align,v=s.sign,A=s.symbol,S=s.zero,T=s.width,L=s.comma,$=s.precision,O=s.trim,y=s.type;y==="n"?(L=!0,y="g"):dn[y]||($===void 0&&($=12),O=!0,y="g"),(S||g==="0"&&k==="=")&&(S=!0,g="0",k="=");var D=A==="$"?e:A==="#"&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",d=A==="$"?r:/[%p]/.test(y)?a:"",c=dn[y],x=/[defgprs%]/.test(y);$=$===void 0?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,$)):Math.max(0,Math.min(20,$));function W(m){var w=D,p=d,C,I,M;if(y==="c")p=c(m)+p,m="";else{m=+m;var z=m<0||1/m<0;if(m=isNaN(m)?f:c(Math.abs(m),$),O&&(m=ct(m)),z&&+m==0&&v!=="+"&&(z=!1),w=(z?v==="("?v:o:v==="-"||v==="("?"":v)+w,p=(y==="s"?gn[8+Nn/3]:"")+p+(z&&v==="("?")":""),x){for(C=-1,I=m.length;++C<I;)if(M=m.charCodeAt(C),48>M||M>57){p=(M===46?i+m.slice(C+1):m.slice(C))+p,m=m.slice(0,C);break}}}L&&!S&&(m=t(m,1/0));var E=w.length+m.length+p.length,b=E<T?new Array(T-E+1).join(g):"";switch(L&&S&&(m=t(b+m,b.length?T-p.length:1/0),b=""),k){case"<":m=w+m+p+b;break;case"=":m=w+b+m+p;break;case"^":m=b.slice(0,E=b.length>>1)+w+m+p+b.slice(E);break;default:m=b+w+m+p;break}return u(m)}return W.toString=function(){return s+""},W}function h(s,g){var k=l((s=Q(s),s.type="f",s)),v=Math.max(-8,Math.min(8,Math.floor(B(g)/3)))*3,A=Math.pow(10,-v),S=gn[8+v/3];return function(T){return k(A*T)+S}}return{format:l,formatPrefix:h}}var V,Sn,_n;ht({thousands:",",grouping:[3],currency:["$",""]});function ht(n){return V=dt(n),Sn=V.format,_n=V.formatPrefix,V}function mt(n){return Math.max(0,-B(Math.abs(n)))}function gt(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(B(t)/3)))*3-B(Math.abs(n)))}function pt(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,B(t)-B(n))+1}function yt(n,t){switch(arguments.length){case 0:break;case 1:this.range(n);break;default:this.range(t).domain(n);break}return this}function vt(n){return function(){return n}}function Mt(n){return+n}var pn=[0,1];function F(n){return n}function nn(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:vt(isNaN(t)?NaN:.5)}function xt(n,t){var e;return n>t&&(e=n,n=t,t=e),function(r){return Math.max(n,Math.min(t,r))}}function wt(n,t,e){var r=n[0],i=n[1],u=t[0],a=t[1];return i<r?(r=nn(i,r),u=e(a,u)):(r=nn(r,i),u=e(u,a)),function(o){return u(r(o))}}function kt(n,t,e){var r=Math.min(n.length,t.length)-1,i=new Array(r),u=new Array(r),a=-1;for(n[r]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=nn(n[a],n[a+1]),u[a]=e(t[a],t[a+1]);return function(o){var f=Qn(n,o,1,r)-1;return u[f](i[f](o))}}function At(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp()).unknown(n.unknown())}function $t(){var n=pn,t=pn,e=en,r,i,u,a=F,o,f,l;function h(){var g=Math.min(n.length,t.length);return a!==F&&(a=xt(n[0],n[g-1])),o=g>2?kt:wt,f=l=null,s}function s(g){return g==null||isNaN(g=+g)?u:(f||(f=o(n.map(r),t,e)))(r(a(g)))}return s.invert=function(g){return a(i((l||(l=o(t,n.map(r),J)))(g)))},s.domain=function(g){return arguments.length?(n=Array.from(g,Mt),h()):n.slice()},s.range=function(g){return arguments.length?(t=Array.from(g),h()):t.slice()},s.rangeRound=function(g){return t=Array.from(g),e=at,h()},s.clamp=function(g){return arguments.length?(a=g?!0:F,h()):a!==F},s.interpolate=function(g){return arguments.length?(e=g,h()):e},s.unknown=function(g){return arguments.length?(u=g,s):u},function(g,k){return r=g,i=k,h()}}function bt(){return $t()(F,F)}function Nt(n,t,e,r){var i=Kn(n,t,e),u;switch(r=Q(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(n),Math.abs(t));return r.precision==null&&!isNaN(u=gt(i,a))&&(r.precision=u),_n(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(u=pt(i,Math.max(Math.abs(n),Math.abs(t))))&&(r.precision=u-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(u=mt(i))&&(r.precision=u-(r.type==="%")*2);break}}return Sn(r)}function St(n){var t=n.domain;return n.ticks=function(e){var r=t();return Jn(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){var i=t();return Nt(i[0],i[i.length-1],e??10,r)},n.nice=function(e){e==null&&(e=10);var r=t(),i=0,u=r.length-1,a=r[i],o=r[u],f,l,h=10;for(o<a&&(l=a,a=o,o=l,l=i,i=u,u=l);h-- >0;){if(l=K(a,o,e),l===f)return r[i]=a,r[u]=o,t(r);if(l>0)a=Math.floor(a/l)*l,o=Math.ceil(o/l)*l;else if(l<0)a=Math.ceil(a*l)/l,o=Math.floor(o*l)/l;else break;f=l}return n},n}function _t(){var n=bt();return n.copy=function(){return At(n,_t())},yt.apply(n,arguments),St(n)}function Tt(n){return typeof n=="string"?new ln([[document.querySelector(n)]],[document.documentElement]):new ln([[n]],Dn)}function Lt(n){return Math.max(0,-P(Math.abs(n)))}function Ct(n,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(P(t)/3)))*3-P(Math.abs(n)))}function jt(n,t){return n=Math.abs(n),t=Math.abs(t)-n,Math.max(0,P(t)-P(n))+1}function zt(n,t,e){n=+n,t=+t,e=(i=arguments.length)<2?(t=n,n=0,1):i<3?1:+e;for(var r=-1,i=Math.max(0,Math.ceil((t-n)/e))|0,u=new Array(i);++r<i;)u[r]=n+r*e;return u}var Et=Math.sqrt(50),Rt=Math.sqrt(10),Dt=Math.sqrt(2);function Ft(n,t,e){var r=U(n,t,e);return zt(Math.ceil(n/r)*r,Math.floor(t/r)*r+r/2,r)}function U(n,t,e){var r=Math.abs(t-n)/Math.max(0,e),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),u=r/i;return u>=Et?i*=10:u>=Rt?i*=5:u>=Dt&&(i*=2),t<n?-i:i}function Bt(n,t){var e=0,r=n.length,i,u=-1;if(t==null)for(;++u<r;)(i=+n[u])&&(e+=i);else for(;++u<r;)(i=+t(n[u],u,n))&&(e+=i);return e}var Tn=Array.prototype,Ot=Tn.map,yn=Tn.slice;const vn=function n(t){var e=Bn(t);function r(i,u){var a=e((i=fn(i)).r,(u=fn(u)).r),o=e(i.g,u.g),f=e(i.b,u.b),l=Fn(i.opacity,u.opacity);return function(h){return i.r=a(h),i.g=o(h),i.b=f(h),i.opacity=l(h),i+""}}return r.gamma=n,r}(1);function qt(n,t){t||(t=[]);var e=n?Math.min(t.length,n.length):0,r=t.slice(),i;return function(u){for(i=0;i<e;++i)r[i]=n[i]*(1-u)+t[i]*u;return r}}function Pt(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Wt(n,t){var e=t?t.length:0,r=n?Math.min(e,n.length):0,i=new Array(r),u=new Array(e),a;for(a=0;a<r;++a)i[a]=an(n[a],t[a]);for(;a<e;++a)u[a]=t[a];return function(o){for(a=0;a<r;++a)u[a]=i[a](o);return u}}function It(n,t){var e=new Date;return n=+n,t=+t,function(r){return e.setTime(n*(1-r)+t*r),e}}function Y(n,t){return n=+n,t=+t,function(e){return n*(1-e)+t*e}}function Vt(n,t){var e={},r={},i;(n===null||typeof n!="object")&&(n={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in n?e[i]=an(n[i],t[i]):r[i]=t[i];return function(u){for(i in e)r[i]=e[i](u);return r}}var tn=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Z=new RegExp(tn.source,"g");function Gt(n){return function(){return n}}function Ht(n){return function(t){return n(t)+""}}function Xt(n,t){var e=tn.lastIndex=Z.lastIndex=0,r,i,u,a=-1,o=[],f=[];for(n=n+"",t=t+"";(r=tn.exec(n))&&(i=Z.exec(t));)(u=i.index)>e&&(u=t.slice(e,u),o[a]?o[a]+=u:o[++a]=u),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,f.push({i:a,x:Y(r,i)})),e=Z.lastIndex;return e<t.length&&(u=t.slice(e),o[a]?o[a]+=u:o[++a]=u),o.length<2?f[0]?Ht(f[0].x):Gt(t):(t=f.length,function(l){for(var h=0,s;h<t;++h)o[(s=f[h]).i]=s.x(l);return o.join("")})}function an(n,t){var e=typeof t,r;return t==null||e==="boolean"?On(t):(e==="number"?Y:e==="string"?(r=cn(t))?(t=r,vn):Xt:t instanceof cn?vn:t instanceof Date?It:Pt(t)?qt:Array.isArray(t)?Wt:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Vt:Y)(n,t)}function Qt(n,t){return n=+n,t=+t,function(e){return Math.round(n*(1-e)+t*e)}}function Ut(n){return function(){return n}}function Yt(n){return+n}var Mn=[0,1];function Ln(n,t){return(t-=n=+n)?function(e){return(e-n)/t}:Ut(t)}function Zt(n){return function(t,e){var r=n(t=+t,e=+e);return function(i){return i<=t?0:i>=e?1:r(i)}}}function Jt(n){return function(t,e){var r=n(t=+t,e=+e);return function(i){return i<=0?t:i>=1?e:r(i)}}}function Kt(n,t,e,r){var i=n[0],u=n[1],a=t[0],o=t[1];return u<i?(i=e(u,i),a=r(o,a)):(i=e(i,u),a=r(a,o)),function(f){return a(i(f))}}function ne(n,t,e,r){var i=Math.min(n.length,t.length)-1,u=new Array(i),a=new Array(i),o=-1;for(n[i]<n[0]&&(n=n.slice().reverse(),t=t.slice().reverse());++o<i;)u[o]=e(n[o],n[o+1]),a[o]=r(t[o],t[o+1]);return function(f){var l=qn(n,f,1,i)-1;return a[l](u[l](f))}}function te(n,t){return t.domain(n.domain()).range(n.range()).interpolate(n.interpolate()).clamp(n.clamp())}function ee(n,t){var e=Mn,r=Mn,i=an,u=!1,a,o,f;function l(){return a=Math.min(e.length,r.length)>2?ne:Kt,o=f=null,h}function h(s){return(o||(o=a(e,r,u?Zt(n):n,i)))(+s)}return h.invert=function(s){return(f||(f=a(r,e,Ln,u?Jt(t):t)))(+s)},h.domain=function(s){return arguments.length?(e=Ot.call(s,Yt),l()):e.slice()},h.range=function(s){return arguments.length?(r=yn.call(s),l()):r.slice()},h.rangeRound=function(s){return r=yn.call(s),i=Qt,l()},h.clamp=function(s){return arguments.length?(u=!!s,l()):u},h.interpolate=function(s){return arguments.length?(i=s,l()):i},l()}function re(n,t,e){var r=n[0],i=n[n.length-1],u=U(r,i,t??10),a;switch(e=kn(e??",f"),e.type){case"s":{var o=Math.max(Math.abs(r),Math.abs(i));return e.precision==null&&!isNaN(a=Ct(u,o))&&(e.precision=a),An(e,o)}case"":case"e":case"g":case"p":case"r":{e.precision==null&&!isNaN(a=jt(u,Math.max(Math.abs(r),Math.abs(i))))&&(e.precision=a-(e.type==="e"));break}case"f":case"%":{e.precision==null&&!isNaN(a=Lt(u))&&(e.precision=a-(e.type==="%")*2);break}}return $n(e)}function ie(n){var t=n.domain;return n.ticks=function(e){var r=t();return Ft(r[0],r[r.length-1],e??10)},n.tickFormat=function(e,r){return re(t(),e,r)},n.nice=function(e){var r=t(),i=r.length-1,u=e??10,a=r[0],o=r[i],f=U(a,o,u);return f&&(f=U(Math.floor(a/f)*f,Math.ceil(o/f)*f,u),r[0]=Math.floor(a/f)*f,r[i]=Math.ceil(o/f)*f,t(r)),n},n}function Cn(){var n=ee(Ln,Y);return n.copy=function(){return te(n,Cn())},ie(n)}var ae=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},jn=function(t){return t},xn=function(t){for(var e=[],r=0,i=t.length;r<i;r++)e[r]=t[i-r-1];return e},wn=function(t,e){t.each(function(){var r=Tt(this),i=r.text().split(/\s+/).reverse(),u,a=[],o=1.2;r.attr("y");for(var f=parseFloat(r.attr("dy"))||0,l=r.text(null).append("tspan").attr("x",0).attr("dy",f+"em");u=i.pop();)a.push(u),l.text(a.join(" ")),l.node().getComputedTextLength()>e&&a.length>1&&(a.pop(),l.text(a.join(" ")),a=[u],l=r.append("tspan").attr("x",0).attr("dy",o+f+"em").text(u))})},ue=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments[1],r=arguments[2],i=arguments[3],u=arguments[4];if((typeof e>"u"?"undefined":ae(e))==="object"){if(e.length===0)return t;for(var a=e.length;a<t.length;a++)e.push(t[a]);return e}else if(typeof e=="function"){for(var o=[],f=t.length,l=0;l<f;l++)o.push(e({i:l,genLength:f,generatedLabels:t,domain:r,range:i,labelDelimiter:u}));return o}return t},oe=function(t,e,r){var i=[];if(e.length>1)i=e;else for(var u=t.domain(),a=(u[u.length-1]-u[0])/(e-1),o=0;o<e;o++)i.push(u[0]+o*a);var f=i.map(r);return{data:i,labels:f,feature:function(h){return t(h)}}},le=function(t,e,r){var i=t.range().map(function(u){var a=t.invertExtent(u);return e(a[0])+" "+r+" "+e(a[1])});return{data:t.range(),labels:i,feature:jn}},fe=function(t){return{data:t.domain(),labels:t.domain(),feature:function(r){return t(r)}}},ce=function(t,e,r){t.call("cellover",r,e)},se=function(t,e,r){t.call("cellout",r,e)},de=function(t,e,r){t.call("cellclick",r,e)},_={d3_drawShapes:function(t,e,r,i,u,a){t==="rect"?e.attr("height",r).attr("width",i):t==="circle"?e.attr("r",u):t==="line"?e.attr("x1",0).attr("x2",i).attr("y1",0).attr("y2",0):t==="path"&&e.attr("d",a)},d3_addText:function(t,e,r,i,u){e.append("text").attr("class",i+"label");var a=t.selectAll("g."+i+"cell text."+i+"label").data(r).text(jn);return u&&t.selectAll("g."+i+"cell text."+i+"label").call(wn,u),a},d3_calcType:function(t,e,r,i,u,a){var o=t.invertExtent?le(t,u,a):t.ticks?oe(t,r,u):fe(t),f=t.range&&t.range()||t.domain();return o.labels=ue(o.labels,i,t.domain(),f,a),e&&(o.labels=xn(o.labels),o.data=xn(o.data)),o},d3_filterCells:function(t,e){var r=t.data.map(function(a,o){return{data:a,label:t.labels[o]}}).filter(e),i=r.map(function(a){return a.data}),u=r.map(function(a){return a.label});return t.data=t.data.filter(function(a){return i.indexOf(a)!==-1}),t.labels=t.labels.filter(function(a){return u.indexOf(a)!==-1}),t},d3_placement:function(t,e,r,i,u,a){e.attr("transform",r),i.attr("transform",u),t==="horizontal"&&i.style("text-anchor",a)},d3_addEvents:function(t,e){t.on("mouseover.legend",function(r){ce(e,r,this)}).on("mouseout.legend",function(r){se(e,r,this)}).on("click.legend",function(r){de(e,r,this)})},d3_title:function(t,e,r,i){if(e!==""){var u=t.selectAll("text."+r+"legendTitle");u.data([e]).enter().append("text").attr("class",r+"legendTitle"),t.selectAll("text."+r+"legendTitle").text(e),i&&t.selectAll("text."+r+"legendTitle").call(wn,i);var a=t.select("."+r+"legendCells"),o=t.select("."+r+"legendTitle").nodes().map(function(l){return l.getBBox().height})[0],f=-a.nodes().map(function(l){return l.getBBox().x})[0];a.attr("transform","translate("+f+","+o+")")}},d3_defaultLocale:{format:$n,formatPrefix:An},d3_defaultFormatSpecifier:".01f",d3_defaultDelimiter:"to"};function pe(){var n=Cn(),t="rect",e=15,r=15,i=10,u=2,a=[5],o=void 0,f=[],l="",h=!1,s="",g=_.d3_defaultLocale,k=_.d3_defaultFormatSpecifier,v=10,A="middle",S=_.d3_defaultDelimiter,T=void 0,L="vertical",$=!1,O=void 0,y=void 0,D=Pn("cellover","cellout","cellclick");function d(c){var x=_.d3_calcType(n,$,a,f,g.format(k),S),W=c.selectAll("g").data([n]);W.enter().append("g").attr("class",l+"legendCells"),o&&_.d3_filterCells(x,o);var m=c.select("."+l+"legendCells").selectAll("."+l+"cell").data(x.data),w=m.enter().append("g").attr("class",l+"cell");w.append(t).attr("class",l+"swatch");var p=c.selectAll("g."+l+"cell "+t+"."+l+"swatch").data(x.data);_.d3_addEvents(w,D),m.exit().transition().style("opacity",0).remove(),p.exit().transition().style("opacity",0).remove(),p=p.merge(p),_.d3_drawShapes(t,p,r,e,i,O);var C=_.d3_addText(c,w,x.labels,l,T);m=w.merge(m);var I=C.nodes().map(function(j){return j.getBBox()}),M=p.nodes().map(function(j){return j.getBBox()});h?p.attr("class",function(j){return l+"swatch "+x.feature(j)}):t=="line"?p.style("stroke",x.feature):p.style("fill",x.feature);var z=void 0,E=void 0,b=A=="start"?0:A=="middle"?.5:1;L==="vertical"?function(){var j=I.map(function(q,N){return Math.max(q.height,M[N].height)});z=function(N,R){var zn=Bt(j.slice(0,R));return"translate(0, "+(zn+R*u)+")"},E=function(N,R){return"translate( "+(M[R].width+M[R].x+v)+", "+(M[R].y+M[R].height/2+5)+")"}}():L==="horizontal"&&(z=function(q,N){return"translate("+N*(M[N].width+u)+",0)"},E=function(q,N){return"translate("+(M[N].width*b+M[N].x)+`,
          `+(M[N].height+M[N].y+v+8)+")"}),_.d3_placement(L,m,z,C,E,A),_.d3_title(c,s,l,y),m.transition().style("opacity",1)}return d.scale=function(c){return arguments.length?(n=c,d):n},d.cells=function(c){return arguments.length?((c.length>1||c>=2)&&(a=c),d):a},d.cellFilter=function(c){return arguments.length?(o=c,d):o},d.shape=function(c,x){return arguments.length?((c=="rect"||c=="circle"||c=="line"||c=="path"&&typeof x=="string")&&(t=c,O=x),d):t},d.shapeWidth=function(c){return arguments.length?(e=+c,d):e},d.shapeHeight=function(c){return arguments.length?(r=+c,d):r},d.shapeRadius=function(c){return arguments.length?(i=+c,d):i},d.shapePadding=function(c){return arguments.length?(u=+c,d):u},d.labels=function(c){return arguments.length?(f=c,d):f},d.labelAlign=function(c){return arguments.length?((c=="start"||c=="end"||c=="middle")&&(A=c),d):A},d.locale=function(c){return arguments.length?(g=Wn(c),d):g},d.labelFormat=function(c){return arguments.length?(k=kn(c),d):d.locale().format(k)},d.labelOffset=function(c){return arguments.length?(v=+c,d):v},d.labelDelimiter=function(c){return arguments.length?(S=c,d):S},d.labelWrap=function(c){return arguments.length?(T=c,d):T},d.useClass=function(c){return arguments.length?((c===!0||c===!1)&&(h=c),d):h},d.orient=function(c){return arguments.length?(c=c.toLowerCase(),(c=="horizontal"||c=="vertical")&&(L=c),d):L},d.ascending=function(c){return arguments.length?($=!!c,d):$},d.classPrefix=function(c){return arguments.length?(l=c,d):l},d.title=function(c){return arguments.length?(s=c,d):s},d.titleWidth=function(c){return arguments.length?(y=c,d):y},d.textWrap=function(c){return arguments.length?(textWrap=c,d):textWrap},d.on=function(){var c=D.on.apply(D,arguments);return c===D?d:c},d}export{pe as c,Sn as f,_t as l,ge as m};
