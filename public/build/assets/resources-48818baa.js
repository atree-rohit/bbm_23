import{g as D,m as g,e as x,_ as k,r as y,c as l,b as a,F as u,i as _,d as c,o as s,t as m,w as p,v as f,q as L,l as E,p as w,k as C,s as v,j as R,n as I,x as U,f as A}from"./_plugin-vue_export-helper-f849c9f1.js";import{F as T}from"./FileUploadComponent-e2d8b4e3.js";const B=D({name:"ModalAddResource",props:{show:{type:Boolean,default:!1}},components:{FileUploadComponent:T},emits:["close"],data(){return{form_questions:[{type:"text",label:"Title",name:"title",required:!0},{type:"textarea",label:"Link URL",name:"link",required:!0},{type:"select",label:"Resource Type",name:"resource_type",required:!0,options:[{label:"Video",value:"video"},{label:"Presentation",value:"presentation"},{label:"E-book",value:"e-book"},{label:"Website",value:"website"},{label:"Other",value:"other"}]},{type:"file",label:"Image / File (max 2MB)",name:"image",required:!1},{type:"textarea",label:"Description",name:"description",required:!1},{type:"text",label:"Tags",name:"tags",required:!1}],form_data:{},upload_file_flag:!1}},created(){this.initFormData()},watch:{show(e){let o=document.querySelector("body");e==!0?o.classList.add("modal-open"):o.classList.remove("modal-open")}},computed:{...g({user:e=>e.auth.user})},methods:{...x({store:"resources/store"}),initFormData(){this.form_data={title:"",link:"",resource_type:"video",image:null,description:"",tags:"",user:this.user}},closeModal(){this.$emit("close")},handleUploadedFileId(e){e!=null&&(this.form_data.image=e.data.id);try{this.store(this.form_data),this.closeModal(),this.initFormData(),this.upload_file_flag=!1}catch(o){console.error(o)}},submit(){this.upload_file_flag=!0}}}),V=e=>(w("data-v-1ccba9bb"),e=e(),C(),e),j={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},N={class:"modal-dialog modal-lg"},O={class:"modal-content"},P={class:"modal-header"},W=V(()=>a("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Add Resource",-1)),z={class:"modal-body"},X=["for","textContent"],G=["onUpdate:modelValue","placeholder"],H=["onUpdate:modelValue","placeholder"],J=["onUpdate:modelValue"],K=V(()=>a("option",null,"Select Link Type",-1)),Q=["value","textContent","selected"],Y={class:"modal-footer"},Z={key:1,class:"modal-backdrop fade show"};function q(e,o,h,M,n,i){const d=y("file-upload-component");return s(),l(u,null,[e.show?(s(),l("div",j,[a("div",N,[a("div",O,[a("div",P,[W,a("button",{type:"button",class:"btn-close",onClick:o[0]||(o[0]=(...t)=>e.closeModal&&e.closeModal(...t))})]),a("div",z,[a("form",{action:"javascript:void(0)",onSubmit:o[1]||(o[1]=(...t)=>e.submit&&e.submit(...t)),class:"row",method:"post"},[(s(!0),l(u,null,_(e.form_questions,t=>(s(),l("div",{key:t.name,class:"form-group col-12"},[a("label",{for:t.name,class:"font-weight-bold",textContent:m(t.label)},null,8,X),t.type=="text"?p((s(),l("input",{key:0,type:"text","onUpdate:modelValue":r=>e.form_data[t.name]=r,placeholder:`Enter ${t.name}`,class:"form-control"},null,8,G)),[[f,e.form_data[t.name]]]):t.type=="textarea"?p((s(),l("textarea",{key:1,"onUpdate:modelValue":r=>e.form_data[t.name]=r,placeholder:`Enter ${t.name}`,class:"form-control"},null,8,H)),[[f,e.form_data[t.name]]]):t.type=="select"?p((s(),l("select",{key:2,"onUpdate:modelValue":r=>e.form_data[t.name]=r,class:"form-select"},[K,(s(!0),l(u,null,_(t.options,r=>(s(),l("option",{key:r.value,value:r.value,textContent:m(r.label),selected:r.value=="newspaper_print"},null,8,Q))),128))],8,J)),[[L,e.form_data[t.name]]]):t.type=="file"?(s(),E(d,{key:3,class:"form-control",type:"file",upload_file:e.upload_file_flag,folder:"resources",onUploaded_file_id:e.handleUploadedFileId},null,8,["upload_file","onUploaded_file_id"])):c("",!0)]))),128))],32)]),a("div",Y,[a("button",{type:"button",class:"btn btn-secondary",onClick:o[2]||(o[2]=(...t)=>e.closeModal&&e.closeModal(...t))},"Close"),a("button",{type:"button",class:"btn btn-success",onClick:o[3]||(o[3]=(...t)=>e.submit&&e.submit(...t))},"Save changes")])])])])):c("",!0),e.show?(s(),l("div",Z)):c("",!0)],64)}const ee=k(B,[["render",q],["__scopeId","data-v-1ccba9bb"]]);const te={name:"ModalEditResource",props:{show:{type:Boolean,default:!1},data:{type:Object,default:()=>{}}},emits:["close"],data(){return{form_questions:[{type:"text",label:"Title",name:"title",required:!0},{type:"textarea",label:"Link URL",name:"link",required:!0},{type:"select",label:"Resource Type",name:"resource_type",required:!0,options:[{label:"Video",value:"video"},{label:"Presentation",value:"presentation"},{label:"E-book",value:"e-book"},{label:"Website",value:"website"},{label:"Other",value:"other"}]},{type:"textarea",label:"Description",name:"description",required:!1},{type:"text",label:"Tags",name:"tags",required:!1}],form_data:{}}},mounted(){this.initFormData()},watch:{show(e){this.initFormData();let o=document.querySelector("body");e==!0?o.classList.add("modal-open"):o.classList.remove("modal-open")}},computed:{...g({user:e=>e.auth.user})},methods:{...x({update:"resources/update"}),initFormData(){this.form_data={id:this.data.id,title:this.data.title,link:this.data.link,resource_type:this.data.resource_type,description:this.data.description,tags:this.data.tags,user:this.data.user}},closeModal(){this.$emit("close")},submit(){try{this.update(this.form_data),this.initFormData(),this.closeModal()}catch(e){console.error(e)}}}},S=e=>(w("data-v-f795701d"),e=e(),C(),e),oe={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},ae={class:"modal-dialog modal-lg"},se={class:"modal-content"},le={class:"modal-header"},de=S(()=>a("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Edit Resource",-1)),re={class:"modal-body"},ne=["for","textContent"],ie=["onUpdate:modelValue","placeholder"],ce=["onUpdate:modelValue","placeholder"],ue=["onUpdate:modelValue"],me=S(()=>a("option",null,"Select Link Type",-1)),pe=["value","textContent","selected"],_e={class:"modal-footer"},he={key:1,class:"modal-backdrop fade show"};function be(e,o,h,M,n,i){return s(),l(u,null,[h.show?(s(),l("div",oe,[a("div",ae,[a("div",se,[a("div",le,[de,a("button",{type:"button",class:"btn-close",onClick:o[0]||(o[0]=(...d)=>i.closeModal&&i.closeModal(...d))})]),a("div",re,[a("form",{action:"javascript:void(0)",onSubmit:o[1]||(o[1]=(...d)=>i.submit&&i.submit(...d)),class:"row",method:"post"},[(s(!0),l(u,null,_(n.form_questions,d=>(s(),l("div",{key:d.name,class:"form-group col-12"},[a("label",{for:d.name,class:"font-weight-bold",textContent:m(d.label)},null,8,ne),d.type=="text"?p((s(),l("input",{key:0,type:"text","onUpdate:modelValue":t=>n.form_data[d.name]=t,placeholder:`Enter ${d.name}`,class:"form-control"},null,8,ie)),[[f,n.form_data[d.name]]]):d.type=="textarea"?p((s(),l("textarea",{key:1,"onUpdate:modelValue":t=>n.form_data[d.name]=t,placeholder:`Enter ${d.name}`,class:"form-control"},null,8,ce)),[[f,n.form_data[d.name]]]):d.type=="select"?p((s(),l("select",{key:2,"onUpdate:modelValue":t=>n.form_data[d.name]=t,class:"form-select"},[me,(s(!0),l(u,null,_(d.options,t=>(s(),l("option",{key:t.value,value:t.value,textContent:m(t.label),selected:t.value=="newspaper_print"},null,8,pe))),128))],8,ue)),[[L,n.form_data[d.name]]]):c("",!0)]))),128))],32)]),a("div",_e,[a("button",{type:"button",class:"btn btn-secondary",onClick:o[2]||(o[2]=(...d)=>i.closeModal&&i.closeModal(...d))},"Close"),a("button",{type:"button",class:"btn btn-success",onClick:o[3]||(o[3]=(...d)=>i.submit&&i.submit(...d))},"Save changes")])])])])):c("",!0),h.show?(s(),l("div",he)):c("",!0)],64)}const fe=k(te,[["render",be],["__scopeId","data-v-f795701d"]]);const ye={name:"Resources",components:{ModalAddResource:ee,ModalEditResource:fe},data(){return{show_modal:{add:!1,edit:!1},selected_resource:{}}},computed:{...g({user:e=>e.auth.user,all_data:e=>e.resources.all_data})},mounted(){v.dispatch("resources/getAllData")},methods:{gotoLink(e){e.link?window.open(e.link,"_blank"):window.open(e.image_path,"_blank")},get_tags(e){return e.split(",").map(o=>o.trim())},badgeColor(e){switch(e){case"video":return"bg-info";case"presentation":return"bg-success";case"e-book":return"bg-primary";case"website":return"bg-warning";case"other":return"bg-danger"}},editResource(e){this.selected_resource=this.all_data.find(o=>o.id==e),this.show_modal.edit=!0},deleteResource(e){confirm("Are you sure you want to delete this Resource?")&&v.dispatch("resources/delete",e)}}},ve=e=>(w("data-v-4f65500c"),e=e(),C(),e),ge={class:"header d-flex px-2"},ke=ve(()=>a("div",{class:"h1"},"Resources",-1)),we={key:0},Ce={class:"main-container m-4"},$e=["onClick"],Me=["src"],Re={class:"card-body"},Ue={class:"card-title"},xe={class:"hover-btns"},Le=["onClick"],Ve=["onClick"],Se={key:0,class:"press-link-tags"},Fe=["textContent"];function De(e,o,h,M,n,i){const d=y("modal-edit-resource"),t=y("modal-add-resource");return s(),l(u,null,[a("div",ge,[ke,e.user&&(e.user.user_type=="super_admin"||e.user.user_type=="admin")?(s(),l("div",we,[a("button",{class:"btn btn-lg btn-success mx-5",onClick:o[0]||(o[0]=r=>n.show_modal.add=!0),title:"Add Resource"},"+")])):c("",!0)]),a("div",Ce,[(s(!0),l(u,null,_(e.all_data,r=>(s(),l("div",{class:"card",key:r.id,onClick:b=>i.gotoLink(r)},[a("img",{src:r.image_path,class:"card-img-top"},null,8,Me),a("div",Re,[a("h5",Ue,m(r.title),1),a("span",{class:I(["card-badge badge",i.badgeColor(r.resource_type)])},m(r.resource_type),3),a("div",xe,[e.user.user_type=="super_admin"?(s(),l("span",{key:0,class:"card-edit badge bg-primary",onClick:U(b=>i.editResource(r.id),["stop"]),title:"Edit Resource",textContent:"âœŽ"},null,8,Le)):c("",!0),e.user.user_type=="super_admin"?(s(),l("span",{key:1,class:"card-delete badge bg-danger",onClick:U(b=>i.deleteResource(r.id),["stop"])}," X ",8,Ve)):c("",!0)])]),r.tags?(s(),l("div",Se,[(s(!0),l(u,null,_(i.get_tags(r.tags),(b,F)=>(s(),l("span",{key:F,textContent:m(b),class:"press-link-tag badge rounded-pill bg-secondary me-2 px-3 py-2"},null,8,Fe))),128))])):c("",!0)],8,$e))),128))]),R(d,{show:n.show_modal.edit,data:n.selected_resource,onClose:o[1]||(o[1]=r=>n.show_modal.edit=!1)},null,8,["show","data"]),R(t,{show:n.show_modal.add,onClose:o[2]||(o[2]=r=>n.show_modal.add=!1)},null,8,["show"])],64)}const Ee=k(ye,[["render",De],["__scopeId","data-v-4f65500c"]]),$=A({});$.component("resources",Ee);$.use(v);$.mount("#app");
