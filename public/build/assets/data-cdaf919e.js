import{g as x,m as S,s as g,_ as C,c,b as a,F as _,i as v,o as u,n as q,t as r,f as D}from"./_plugin-vue_export-helper-059322b8.js";import"./transform-a3a29f40.js";class U extends Map{constructor(s,e=j){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:e}}),s!=null)for(const[n,l]of s)this.set(n,l)}get(s){return super.get(m(this,s))}has(s){return super.has(m(this,s))}set(s,e){return super.set(O(this,s),e)}delete(s){return super.delete($(this,s))}}function m({_intern:t,_key:s},e){const n=s(e);return t.has(n)?t.get(n):e}function O({_intern:t,_key:s},e){const n=s(e);return t.has(n)?t.get(n):(t.set(n,e),e)}function $({_intern:t,_key:s},e){const n=s(e);return t.has(n)&&(e=t.get(n),t.delete(n)),e}function j(t){return t!==null&&typeof t=="object"?t.valueOf():t}function w(t){return t}function A(t,...s){return B(t,Array.from,w,s)}function B(t,s,e,n){return function l(h,o){if(o>=n.length)return e(h);const i=new U,y=n[o++];let k=-1;for(const d of h){const p=y(d,++k,h),b=i.get(p);b?b.push(d):i.set(p,[d])}for(const[d,p]of i)i.set(d,l(p,o));return s(i)}(t,0)}const M=x({name:"DataComponent",data(){return{filters:[{id:1,name:"Portals",active:!1},{id:2,name:"Location",active:!1},{id:3,name:"Taxa",active:!1},{id:4,name:"Date",active:!1},{id:5,name:"Users",active:!0}]}},computed:{...S({observations:t=>t.data.observations,taxa:t=>t.data.taxa}),observation_stats(){return console.log("this.observations",typeof this.observations,this.observations),Object.keys(this.observations).length===0?(console.log("no observations"),{}):{total:this.observationStats([].concat(...Object.values(this.observations))),counts:this.observationStats(this.observations.counts),inat:this.observationStats(this.observations.inats),ibp:this.observationStats(this.observations.ibps),ifb:this.observationStats(this.observations.ifbs)}},taxa_stats(){return A(this.taxa,s=>s.rank).map(s=>({rank:s[0],count:s[1].length,unique:this.countUnique(s[1].map(e=>e.name))}))}},mounted(){g.dispatch("data/getAllData")},methods:{observationStats(t){return{observations:t.length,users:this.countUnique(t.map(e=>e[2])),states:this.countUnique(t.map(e=>e[4])),districts:this.countUnique(t.map(e=>e[5]))}},countUnique(t){return[...new Set(t)].length}}}),F={class:"data-container"},I={class:"filters"},L={class:"filter-list"},P=["onClick"],z={class:"header"},E={class:"canvas"},N={class:"observations"},T={class:"card-body"},V={class:"card-title"},G={class:"card-text"},H={class:"card-text"},J={class:"card-text"},K={class:"card-text"},Q={class:"taxa"},R={class:"card-body"},W={class:"card-title"},X={class:"card-text"},Y={class:"card-text"};function Z(t,s,e,n,l,h){return u(),c("div",F,[a("div",I,[a("ul",L,[(u(!0),c(_,null,v(t.filters,o=>(u(),c("li",{key:o.id,class:q({active:o.active}),onClick:i=>o.active=!o.active},[a("div",z,r(o.name),1)],10,P))),128))])]),a("div",E,[a("div",N,[(u(!0),c(_,null,v(t.observation_stats,(o,i)=>(u(),c("div",{class:"card",key:i},[a("div",T,[a("h5",V,r(i),1),a("p",G,"Observations: "+r(o.observations),1),a("p",H,"Users: "+r(o.users),1),a("p",J,"States: "+r(o.states),1),a("p",K,"Districts: "+r(o.districts),1)])]))),128))]),a("div",Q,[(u(!0),c(_,null,v(t.taxa_stats,o=>(u(),c("div",{class:"card",key:o.rank},[a("div",R,[a("h5",W,r(o.rank),1),a("p",X,"Count: "+r(o.count),1),a("p",Y,"Unique: "+r(o.unique),1)])]))),128))])])])}const tt=C(M,[["render",Z],["__scopeId","data-v-2f40ad57"]]),f=D({});f.component("DataComponent",tt);f.use(g);f.mount("#app");
