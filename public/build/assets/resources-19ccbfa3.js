import{e as D,_ as C,r as v,c as l,a,F as m,j as b,b as u,o as s,t as p,w as h,v as g,y as U,m as I,p as $,i as M,f as k,n as T,z as F,d as A}from"./_plugin-vue_export-helper-c00cf4a5.js";import{m as R,b as L,s as w}from"./index-59ab4275.js";import{F as B}from"./FileUploadComponent-c8ea38e2.js";import{F as j}from"./Footer-3584132a.js";/* empty css                        */const N=D({name:"ModalAddResource",props:{show:{type:Boolean,default:!1}},components:{FileUploadComponent:B},emits:["close"],data(){return{form_questions:[{type:"text",label:"Title",name:"title",required:!0},{type:"textarea",label:"Link URL",name:"link",required:!0},{type:"select",label:"Resource Type",name:"resource_type",required:!0,options:[{label:"Video",value:"video"},{label:"Presentation",value:"presentation"},{label:"E-book",value:"e-book"},{label:"Website",value:"website"},{label:"Other",value:"other"}]},{type:"file",label:"Image / File (max 2MB)",name:"image",required:!1},{type:"textarea",label:"Description",name:"description",required:!1},{type:"text",label:"Tags",name:"tags",required:!1}],form_data:{},upload_file_flag:!1}},created(){this.initFormData()},watch:{show(e){let t=document.querySelector("body");e==!0?t.classList.add("modal-open"):t.classList.remove("modal-open")}},computed:{...R({user:e=>e.auth.user})},methods:{...L({store:"resources/store"}),initFormData(){this.form_data={title:"",link:"",resource_type:"video",image:null,description:"",tags:"",user:this.user}},closeModal(){this.$emit("close")},handleUploadedFileId(e){e!=null&&(this.form_data.image=e.data.id);try{this.store(this.form_data),this.closeModal(),this.initFormData(),this.upload_file_flag=!1}catch(t){console.error(t)}},submit(){this.upload_file_flag=!0}}}),V=e=>($("data-v-1ccba9bb"),e=e(),M(),e),O={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},z={class:"modal-dialog modal-lg"},P={class:"modal-content"},W={class:"modal-header"},X=V(()=>a("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Add Resource",-1)),G={class:"modal-body"},H=["for","textContent"],J=["onUpdate:modelValue","placeholder"],K=["onUpdate:modelValue","placeholder"],Q=["onUpdate:modelValue"],Y=V(()=>a("option",null,"Select Link Type",-1)),Z=["value","textContent","selected"],q={class:"modal-footer"},ee={key:1,class:"modal-backdrop fade show"};function te(e,t,_,f,n,i){const d=v("file-upload-component");return s(),l(m,null,[e.show?(s(),l("div",O,[a("div",z,[a("div",P,[a("div",W,[X,a("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...o)=>e.closeModal&&e.closeModal(...o))})]),a("div",G,[a("form",{action:"javascript:void(0)",onSubmit:t[1]||(t[1]=(...o)=>e.submit&&e.submit(...o)),class:"row",method:"post"},[(s(!0),l(m,null,b(e.form_questions,o=>(s(),l("div",{key:o.name,class:"form-group col-12"},[a("label",{for:o.name,class:"font-weight-bold",textContent:p(o.label)},null,8,H),o.type=="text"?h((s(),l("input",{key:0,type:"text","onUpdate:modelValue":c=>e.form_data[o.name]=c,placeholder:`Enter ${o.name}`,class:"form-control"},null,8,J)),[[g,e.form_data[o.name]]]):o.type=="textarea"?h((s(),l("textarea",{key:1,"onUpdate:modelValue":c=>e.form_data[o.name]=c,placeholder:`Enter ${o.name}`,class:"form-control"},null,8,K)),[[g,e.form_data[o.name]]]):o.type=="select"?h((s(),l("select",{key:2,"onUpdate:modelValue":c=>e.form_data[o.name]=c,class:"form-select"},[Y,(s(!0),l(m,null,b(o.options,c=>(s(),l("option",{key:c.value,value:c.value,textContent:p(c.label),selected:c.value=="newspaper_print"},null,8,Z))),128))],8,Q)),[[U,e.form_data[o.name]]]):o.type=="file"?(s(),I(d,{key:3,class:"form-control",type:"file",upload_file:e.upload_file_flag,folder:"resources",onUploaded_file_id:e.handleUploadedFileId},null,8,["upload_file","onUploaded_file_id"])):u("",!0)]))),128))],32)]),a("div",q,[a("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=(...o)=>e.closeModal&&e.closeModal(...o))},"Close"),a("button",{type:"button",class:"btn btn-success",onClick:t[3]||(t[3]=(...o)=>e.submit&&e.submit(...o))},"Save changes")])])])])):u("",!0),e.show?(s(),l("div",ee)):u("",!0)],64)}const oe=C(N,[["render",te],["__scopeId","data-v-1ccba9bb"]]);const ae={name:"ModalEditResource",props:{show:{type:Boolean,default:!1},data:{type:Object,default:()=>{}}},emits:["close"],data(){return{form_questions:[{type:"text",label:"Title",name:"title",required:!0},{type:"textarea",label:"Link URL",name:"link",required:!0},{type:"select",label:"Resource Type",name:"resource_type",required:!0,options:[{label:"Video",value:"video"},{label:"Presentation",value:"presentation"},{label:"E-book",value:"e-book"},{label:"Website",value:"website"},{label:"Other",value:"other"}]},{type:"textarea",label:"Description",name:"description",required:!1},{type:"text",label:"Tags",name:"tags",required:!1}],form_data:{}}},mounted(){this.initFormData()},watch:{show(e){this.initFormData();let t=document.querySelector("body");e==!0?t.classList.add("modal-open"):t.classList.remove("modal-open")}},computed:{...R({user:e=>e.auth.user})},methods:{...L({update:"resources/update"}),initFormData(){this.form_data={id:this.data.id,title:this.data.title,link:this.data.link,resource_type:this.data.resource_type,description:this.data.description,tags:this.data.tags,user:this.data.user}},closeModal(){this.$emit("close")},submit(){try{this.update(this.form_data),this.initFormData(),this.closeModal()}catch(e){console.error(e)}}}},S=e=>($("data-v-f795701d"),e=e(),M(),e),se={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},le={class:"modal-dialog modal-lg"},de={class:"modal-content"},ne={class:"modal-header"},re=S(()=>a("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Edit Resource",-1)),ie={class:"modal-body"},ce=["for","textContent"],ue=["onUpdate:modelValue","placeholder"],me=["onUpdate:modelValue","placeholder"],pe=["onUpdate:modelValue"],_e=S(()=>a("option",null,"Select Link Type",-1)),he=["value","textContent","selected"],be={class:"modal-footer"},fe={key:1,class:"modal-backdrop fade show"};function ye(e,t,_,f,n,i){return s(),l(m,null,[_.show?(s(),l("div",se,[a("div",le,[a("div",de,[a("div",ne,[re,a("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...d)=>i.closeModal&&i.closeModal(...d))})]),a("div",ie,[a("form",{action:"javascript:void(0)",onSubmit:t[1]||(t[1]=(...d)=>i.submit&&i.submit(...d)),class:"row",method:"post"},[(s(!0),l(m,null,b(n.form_questions,d=>(s(),l("div",{key:d.name,class:"form-group col-12"},[a("label",{for:d.name,class:"font-weight-bold",textContent:p(d.label)},null,8,ce),d.type=="text"?h((s(),l("input",{key:0,type:"text","onUpdate:modelValue":o=>n.form_data[d.name]=o,placeholder:`Enter ${d.name}`,class:"form-control"},null,8,ue)),[[g,n.form_data[d.name]]]):d.type=="textarea"?h((s(),l("textarea",{key:1,"onUpdate:modelValue":o=>n.form_data[d.name]=o,placeholder:`Enter ${d.name}`,class:"form-control"},null,8,me)),[[g,n.form_data[d.name]]]):d.type=="select"?h((s(),l("select",{key:2,"onUpdate:modelValue":o=>n.form_data[d.name]=o,class:"form-select"},[_e,(s(!0),l(m,null,b(d.options,o=>(s(),l("option",{key:o.value,value:o.value,textContent:p(o.label),selected:o.value=="newspaper_print"},null,8,he))),128))],8,pe)),[[U,n.form_data[d.name]]]):u("",!0)]))),128))],32)]),a("div",be,[a("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=(...d)=>i.closeModal&&i.closeModal(...d))},"Close"),a("button",{type:"button",class:"btn btn-success",onClick:t[3]||(t[3]=(...d)=>i.submit&&i.submit(...d))},"Save changes")])])])])):u("",!0),_.show?(s(),l("div",fe)):u("",!0)],64)}const ve=C(ae,[["render",ye],["__scopeId","data-v-f795701d"]]);const ge={name:"Resources",components:{ModalAddResource:oe,ModalEditResource:ve,Footer:j},data(){return{show_modal:{add:!1,edit:!1},selected_resource:{}}},computed:{...R({user:e=>e.auth.user,all_data:e=>e.resources.all_data})},mounted(){w.dispatch("resources/getAllData")},methods:{isImage(e){return[".jpg",".jpeg",".gif",".png"].map(t=>{if(e.includes(t))return!0}),!1},gotoLink(e){e.link?window.open(e.link,"_blank"):window.open(e.image_path,"_blank")},get_tags(e){return e.split(",").map(t=>t.trim())},badgeColor(e){switch(e){case"video":return"bg-info";case"presentation":return"bg-success";case"e-book":return"bg-primary";case"website":return"bg-warning";case"other":return"bg-danger"}},youtubeThumbnail(e){let t="";if(e.link.includes("youtube.com")){const _=/[?&]v=([^&#]+)/;let f="";const n=e.link.match(_);n&&n[1]&&(f=n[1]),t=`https://img.youtube.com/vi/${f}/0.jpg`}return console.log(t),t},editResource(e){this.selected_resource=this.all_data.find(t=>t.id==e),this.show_modal.edit=!0},deleteResource(e){confirm("Are you sure you want to delete this Resource?")&&w.dispatch("resources/delete",e)}}},ke=e=>($("data-v-93a34158"),e=e(),M(),e),we={class:"header d-flex px-2"},Ce=ke(()=>a("div",{class:"h1"},"Resources",-1)),$e={key:0},Me={class:"main-container m-4"},Re=["onClick"],xe=["src"],Fe={key:1},Ue={class:"py-5 bg-warning text-center"},Le={class:"h1"},Ve=["src"],Se={class:"card-body"},Ee={class:"card-title"},De={class:"hover-btns"},Ie=["onClick"],Te=["onClick"],Ae={key:3,class:"press-link-tags"},Be=["textContent"];function je(e,t,_,f,n,i){const d=v("modal-edit-resource"),o=v("modal-add-resource"),c=v("Footer");return s(),l(m,null,[a("div",we,[Ce,e.user&&(e.user.user_type=="super_admin"||e.user.user_type=="admin")?(s(),l("div",$e,[a("button",{class:"btn btn-lg btn-success mx-5",onClick:t[0]||(t[0]=r=>n.show_modal.add=!0),title:"Add Resource"},"+")])):u("",!0)]),a("div",Me,[(s(!0),l(m,null,b(e.all_data,r=>(s(),l("div",{class:"card border",key:r.id,onClick:y=>i.gotoLink(r)},[r.resource_type=="video"?(s(),l("img",{key:0,src:i.youtubeThumbnail(r),class:"card-img-top"},null,8,xe)):r.title=="BBM Count Form"?(s(),l("div",Fe,[a("div",Ue,[a("h1",Le,p(r.title),1)])])):(s(),l("img",{key:2,src:r.image_path,class:"card-img-top"},null,8,Ve)),a("div",Se,[a("h5",Ee,p(r.title),1),a("span",{class:T(["card-badge badge",i.badgeColor(r.resource_type)])},p(r.resource_type),3),a("div",De,[e.user.user_type=="super_admin"?(s(),l("span",{key:0,class:"card-edit badge bg-primary",onClick:F(y=>i.editResource(r.id),["stop"]),title:"Edit Resource",textContent:"✎"},null,8,Ie)):u("",!0),e.user.user_type=="super_admin"?(s(),l("span",{key:1,class:"card-delete badge bg-danger",onClick:F(y=>i.deleteResource(r.id),["stop"])}," X ",8,Te)):u("",!0)])]),r.tags?(s(),l("div",Ae,[(s(!0),l(m,null,b(i.get_tags(r.tags),(y,E)=>(s(),l("span",{key:E,textContent:p(y),class:"press-link-tag badge rounded-pill bg-secondary me-2 px-3 py-2"},null,8,Be))),128))])):u("",!0)],8,Re))),128))]),k(d,{show:n.show_modal.edit,data:n.selected_resource,onClose:t[1]||(t[1]=r=>n.show_modal.edit=!1)},null,8,["show","data"]),k(o,{show:n.show_modal.add,onClose:t[2]||(t[2]=r=>n.show_modal.add=!1)},null,8,["show"]),k(c)],64)}const Ne=C(ge,[["render",je],["__scopeId","data-v-93a34158"]]),x=A({});x.component("resources",Ne);x.use(w);x.mount("#app");
