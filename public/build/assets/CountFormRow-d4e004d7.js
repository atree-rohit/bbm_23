import{m as b,_ as C,c as n,b as s,F as c,j as _,t as a,d,n as p,o,p as v,l as x}from"./_plugin-vue_export-helper-7e48e9c7.js";const k={name:"CountFormRow",props:{count_form:{type:Object,required:!0}},data(){return{fields:{form:["name","affiliation","phone","email","team_members","location","state","district","latitude","longitude","date","start_time","end_time","altitude","distance","weather","photo_link","status","comments"],form_mini:["location","state","district","latitude","longitude","date","start_time","end_time"],species:["common_name","scientific_name","individuals","remarks","status"]},statuses:["pending","approved","duplicate","rejected"],show_details:!1}},computed:{...b({is_super_admin:e=>e.auth.is_super_admin,is_admin:e=>e.auth.is_admin,user:e=>e.auth.user}),admin(){return this.is_super_admin||this.is_admin},form_validate_flag(){let e=!1;return this.count_form.species_list.filter(i=>i.status=="approved").length>0&&(e=!0),e},unvalidated_species(){return this.count_form.species_list.filter(e=>e.status!="approved").length>0}},methods:{buttonText(){return this.show_details?"Hide Details":"Show Details"},rowClass(){return this.count_form.status=="approved"?"form-approved":"form-pending"},speciesRowClass(e){return e.status=="approved"?"table-success":"table-danger"},setFormStatus(e){let i={form_id:this.count_form.id,status:e};this.$store.dispatch("count_forms/setFormStatus",i)},setSpeciesStatus(e,i){let u={species_id:e.id,status:i};this.$store.dispatch("count_forms/setSpeciesStatus",u)},validateAllSpecies(){this.count_form.species_list.forEach(e=>{e.status!="approved"&&this.setSpeciesStatus(e,"approved")})}}},f=e=>(v("data-v-9ee75ed5"),e=e(),x(),e),S={class:"form-data-container"},y=["textContent"],w=["textContent"],g={class:"text-center"},F=["textContent"],R={key:0,class:"species-list container-fluid"},j={key:0,class:"border border-success text-center m-1 p-2 d-flex"},A=f(()=>s("span",null,"Set Count Form Status",-1)),I=["textContent","onClick"],V={class:"table table-sm"},B=["textContent"],D=["textContent"],N={key:1,class:"border border-success text-center m-1 p-2"},E={class:"table table-sm"},T={class:"bg-dark text-light"},q=f(()=>s("th",null,"Sl. No",-1)),z=["textContent"],H={key:0,class:"bg-success"},L={key:0,class:"d-flex justify-content-around"},O=["textContent","onClick"];function G(e,i,u,J,r,l){return o(),n("div",{class:p(["form-row",l.rowClass()])},[s("div",S,[(o(!0),n(c,null,_(r.fields.form_mini,t=>(o(),n("div",{key:t,class:"form-field"},[s("span",{textContent:a(t)},null,8,y),s("span",{textContent:a(u.count_form[t])},null,8,w)]))),128))]),s("div",g,[s("button",{class:"btn btn-success btn-sm m-1",onClick:i[0]||(i[0]=t=>r.show_details=!r.show_details),textContent:a(l.buttonText())},null,8,F)]),r.show_details?(o(),n("div",R,[l.admin?(o(),n("div",j,[A,(o(!0),n(c,null,_(r.statuses,t=>(o(),n("div",{key:t,class:"mx-2"},[t!=u.count_form.status?(o(),n("button",{key:0,class:"btn btn-success btn-sm",textContent:a(t),onClick:h=>l.setFormStatus(t)},null,8,I)):d("",!0)]))),128))])):d("",!0),s("table",V,[s("tbody",null,[(o(!0),n(c,null,_(r.fields.form,t=>(o(),n("tr",{key:t},[s("td",{textContent:a(t)},null,8,B),s("td",{textContent:a(u.count_form[t])},null,8,D)]))),128))])]),l.admin&&l.unvalidated_species?(o(),n("div",N,[s("button",{class:"btn btn-success",onClick:i[1]||(i[1]=(...t)=>l.validateAllSpecies&&l.validateAllSpecies(...t))},"Validate All Species")])):d("",!0),s("table",E,[s("thead",T,[s("tr",null,[q,(o(!0),n(c,null,_(r.fields.species,t=>(o(),n("th",{key:t,textContent:a(t)},null,8,z))),128)),l.admin?(o(),n("th",H,"Validate")):d("",!0)])]),s("tbody",null,[(o(!0),n(c,null,_(u.count_form.species_list,(t,h)=>(o(),n("tr",{key:t.id,class:p(l.speciesRowClass(t))},[s("td",null,a(h+1),1),s("td",null,a(t.common_name),1),s("td",null,a(t.scientific_name),1),s("td",null,a(t.individuals),1),s("td",null,a(t.remarks),1),s("td",null,a(t.status),1),l.admin?(o(),n("td",L,[(o(!0),n(c,null,_(r.statuses,m=>(o(),n("div",{key:m},[m!=t.status?(o(),n("button",{key:0,class:"btn btn-success btn-sm",textContent:a(m),onClick:K=>l.setSpeciesStatus(t,m)},null,8,O)):d("",!0)]))),128))])):d("",!0)],2))),128))])])])):d("",!0)],2)}const P=C(k,[["render",G],["__scopeId","data-v-9ee75ed5"]]);export{P as C};
