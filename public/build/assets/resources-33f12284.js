import{g as E,m as k,e as U,_ as w,r as v,c as l,b as a,F as u,i as h,d as c,o as s,t as m,w as _,v as y,q as L,l as D,p as C,k as $,s as g,j as R,n as I,u as x,f as T}from"./_plugin-vue_export-helper-51dc1979.js";import{F as A}from"./FileUploadComponent-ba4f65ce.js";const B=E({name:"ModalAddResource",props:{show:{type:Boolean,default:!1}},components:{FileUploadComponent:A},emits:["close"],data(){return{form_questions:[{type:"text",label:"Title",name:"title",required:!0},{type:"textarea",label:"Link URL",name:"link",required:!0},{type:"select",label:"Resource Type",name:"resource_type",required:!0,options:[{label:"Video",value:"video"},{label:"Presentation",value:"presentation"},{label:"E-book",value:"e-book"},{label:"Website",value:"website"},{label:"Other",value:"other"}]},{type:"file",label:"Image / File (max 2MB)",name:"image",required:!1},{type:"textarea",label:"Description",name:"description",required:!1},{type:"text",label:"Tags",name:"tags",required:!1}],form_data:{},upload_file_flag:!1}},created(){this.initFormData()},watch:{show(e){let t=document.querySelector("body");e==!0?t.classList.add("modal-open"):t.classList.remove("modal-open")}},computed:{...k({user:e=>e.auth.user})},methods:{...U({store:"resources/store"}),initFormData(){this.form_data={title:"",link:"",resource_type:"video",image:null,description:"",tags:"",user:this.user}},closeModal(){this.$emit("close")},handleUploadedFileId(e){e!=null&&(this.form_data.image=e.data.id);try{this.store(this.form_data),this.closeModal(),this.initFormData(),this.upload_file_flag=!1}catch(t){console.error(t)}},submit(){this.upload_file_flag=!0}}}),V=e=>(C("data-v-1ccba9bb"),e=e(),$(),e),j={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},N={class:"modal-dialog modal-lg"},O={class:"modal-content"},P={class:"modal-header"},W=V(()=>a("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Add Resource",-1)),z={class:"modal-body"},X=["for","textContent"],G=["onUpdate:modelValue","placeholder"],H=["onUpdate:modelValue","placeholder"],J=["onUpdate:modelValue"],K=V(()=>a("option",null,"Select Link Type",-1)),Q=["value","textContent","selected"],Y={class:"modal-footer"},Z={key:1,class:"modal-backdrop fade show"};function q(e,t,p,b,r,i){const n=v("file-upload-component");return s(),l(u,null,[e.show?(s(),l("div",j,[a("div",N,[a("div",O,[a("div",P,[W,a("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...o)=>e.closeModal&&e.closeModal(...o))})]),a("div",z,[a("form",{action:"javascript:void(0)",onSubmit:t[1]||(t[1]=(...o)=>e.submit&&e.submit(...o)),class:"row",method:"post"},[(s(!0),l(u,null,h(e.form_questions,o=>(s(),l("div",{key:o.name,class:"form-group col-12"},[a("label",{for:o.name,class:"font-weight-bold",textContent:m(o.label)},null,8,X),o.type=="text"?_((s(),l("input",{key:0,type:"text","onUpdate:modelValue":d=>e.form_data[o.name]=d,placeholder:`Enter ${o.name}`,class:"form-control"},null,8,G)),[[y,e.form_data[o.name]]]):o.type=="textarea"?_((s(),l("textarea",{key:1,"onUpdate:modelValue":d=>e.form_data[o.name]=d,placeholder:`Enter ${o.name}`,class:"form-control"},null,8,H)),[[y,e.form_data[o.name]]]):o.type=="select"?_((s(),l("select",{key:2,"onUpdate:modelValue":d=>e.form_data[o.name]=d,class:"form-select"},[K,(s(!0),l(u,null,h(o.options,d=>(s(),l("option",{key:d.value,value:d.value,textContent:m(d.label),selected:d.value=="newspaper_print"},null,8,Q))),128))],8,J)),[[L,e.form_data[o.name]]]):o.type=="file"?(s(),D(n,{key:3,class:"form-control",type:"file",upload_file:e.upload_file_flag,folder:"resources",onUploaded_file_id:e.handleUploadedFileId},null,8,["upload_file","onUploaded_file_id"])):c("",!0)]))),128))],32)]),a("div",Y,[a("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=(...o)=>e.closeModal&&e.closeModal(...o))},"Close"),a("button",{type:"button",class:"btn btn-success",onClick:t[3]||(t[3]=(...o)=>e.submit&&e.submit(...o))},"Save changes")])])])])):c("",!0),e.show?(s(),l("div",Z)):c("",!0)],64)}const ee=w(B,[["render",q],["__scopeId","data-v-1ccba9bb"]]);const te={name:"ModalEditResource",props:{show:{type:Boolean,default:!1},data:{type:Object,default:()=>{}}},emits:["close"],data(){return{form_questions:[{type:"text",label:"Title",name:"title",required:!0},{type:"textarea",label:"Link URL",name:"link",required:!0},{type:"select",label:"Resource Type",name:"resource_type",required:!0,options:[{label:"Video",value:"video"},{label:"Presentation",value:"presentation"},{label:"E-book",value:"e-book"},{label:"Website",value:"website"},{label:"Other",value:"other"}]},{type:"textarea",label:"Description",name:"description",required:!1},{type:"text",label:"Tags",name:"tags",required:!1}],form_data:{}}},mounted(){this.initFormData()},watch:{show(e){this.initFormData();let t=document.querySelector("body");e==!0?t.classList.add("modal-open"):t.classList.remove("modal-open")}},computed:{...k({user:e=>e.auth.user})},methods:{...U({update:"resources/update"}),initFormData(){this.form_data={id:this.data.id,title:this.data.title,link:this.data.link,resource_type:this.data.resource_type,description:this.data.description,tags:this.data.tags,user:this.data.user}},closeModal(){this.$emit("close")},submit(){try{this.update(this.form_data),this.initFormData(),this.closeModal()}catch(e){console.error(e)}}}},S=e=>(C("data-v-f795701d"),e=e(),$(),e),oe={key:0,class:"modal fade show","aria-modal":"true",role:"dialog"},ae={class:"modal-dialog modal-lg"},se={class:"modal-content"},le={class:"modal-header"},de=S(()=>a("h3",{class:"modal-title",id:"exampleModalLiveLabel"},"Edit Resource",-1)),ne={class:"modal-body"},re=["for","textContent"],ie=["onUpdate:modelValue","placeholder"],ce=["onUpdate:modelValue","placeholder"],ue=["onUpdate:modelValue"],me=S(()=>a("option",null,"Select Link Type",-1)),pe=["value","textContent","selected"],_e={class:"modal-footer"},he={key:1,class:"modal-backdrop fade show"};function be(e,t,p,b,r,i){return s(),l(u,null,[p.show?(s(),l("div",oe,[a("div",ae,[a("div",se,[a("div",le,[de,a("button",{type:"button",class:"btn-close",onClick:t[0]||(t[0]=(...n)=>i.closeModal&&i.closeModal(...n))})]),a("div",ne,[a("form",{action:"javascript:void(0)",onSubmit:t[1]||(t[1]=(...n)=>i.submit&&i.submit(...n)),class:"row",method:"post"},[(s(!0),l(u,null,h(r.form_questions,n=>(s(),l("div",{key:n.name,class:"form-group col-12"},[a("label",{for:n.name,class:"font-weight-bold",textContent:m(n.label)},null,8,re),n.type=="text"?_((s(),l("input",{key:0,type:"text","onUpdate:modelValue":o=>r.form_data[n.name]=o,placeholder:`Enter ${n.name}`,class:"form-control"},null,8,ie)),[[y,r.form_data[n.name]]]):n.type=="textarea"?_((s(),l("textarea",{key:1,"onUpdate:modelValue":o=>r.form_data[n.name]=o,placeholder:`Enter ${n.name}`,class:"form-control"},null,8,ce)),[[y,r.form_data[n.name]]]):n.type=="select"?_((s(),l("select",{key:2,"onUpdate:modelValue":o=>r.form_data[n.name]=o,class:"form-select"},[me,(s(!0),l(u,null,h(n.options,o=>(s(),l("option",{key:o.value,value:o.value,textContent:m(o.label),selected:o.value=="newspaper_print"},null,8,pe))),128))],8,ue)),[[L,r.form_data[n.name]]]):c("",!0)]))),128))],32)]),a("div",_e,[a("button",{type:"button",class:"btn btn-secondary",onClick:t[2]||(t[2]=(...n)=>i.closeModal&&i.closeModal(...n))},"Close"),a("button",{type:"button",class:"btn btn-success",onClick:t[3]||(t[3]=(...n)=>i.submit&&i.submit(...n))},"Save changes")])])])])):c("",!0),p.show?(s(),l("div",he)):c("",!0)],64)}const fe=w(te,[["render",be],["__scopeId","data-v-f795701d"]]);const ye={name:"Resources",components:{ModalAddResource:ee,ModalEditResource:fe},data(){return{show_modal:{add:!1,edit:!1},selected_resource:{}}},computed:{...k({user:e=>e.auth.user,all_data:e=>e.resources.all_data})},mounted(){g.dispatch("resources/getAllData")},methods:{isImage(e){return[".jpg",".jpeg",".gif",".png"].map(t=>{if(e.includes(t))return!0}),!1},gotoLink(e){e.link?window.open(e.link,"_blank"):window.open(e.image_path,"_blank")},get_tags(e){return e.split(",").map(t=>t.trim())},badgeColor(e){switch(e){case"video":return"bg-info";case"presentation":return"bg-success";case"e-book":return"bg-primary";case"website":return"bg-warning";case"other":return"bg-danger"}},youtubeThumbnail(e){let t="";if(e.link.includes("youtube.com")){const p=/[?&]v=([^&#]+)/;let b="";const r=e.link.match(p);r&&r[1]&&(b=r[1]),t=`https://img.youtube.com/vi/${b}/0.jpg`}return console.log(t),t},editResource(e){this.selected_resource=this.all_data.find(t=>t.id==e),this.show_modal.edit=!0},deleteResource(e){confirm("Are you sure you want to delete this Resource?")&&g.dispatch("resources/delete",e)}}},ve=e=>(C("data-v-d4faf55a"),e=e(),$(),e),ge={class:"header d-flex px-2"},ke=ve(()=>a("div",{class:"h1"},"Resources",-1)),we={key:0},Ce={class:"main-container m-4"},$e=["onClick"],Me=["src"],Re={key:1},xe={class:"py-5 bg-warning text-center"},Ue={class:"h1"},Le=["src"],Ve={class:"card-body"},Se={class:"card-title"},Fe={class:"hover-btns"},Ee=["onClick"],De=["onClick"],Ie={key:3,class:"press-link-tags"},Te=["textContent"];function Ae(e,t,p,b,r,i){const n=v("modal-edit-resource"),o=v("modal-add-resource");return s(),l(u,null,[a("div",ge,[ke,e.user&&(e.user.user_type=="super_admin"||e.user.user_type=="admin")?(s(),l("div",we,[a("button",{class:"btn btn-lg btn-success mx-5",onClick:t[0]||(t[0]=d=>r.show_modal.add=!0),title:"Add Resource"},"+")])):c("",!0)]),a("div",Ce,[(s(!0),l(u,null,h(e.all_data,d=>(s(),l("div",{class:"card border",key:d.id,onClick:f=>i.gotoLink(d)},[d.resource_type=="video"?(s(),l("img",{key:0,src:i.youtubeThumbnail(d),class:"card-img-top"},null,8,Me)):d.title=="BBM Count Form"?(s(),l("div",Re,[a("div",xe,[a("h1",Ue,m(d.title),1)])])):(s(),l("img",{key:2,src:d.image_path,class:"card-img-top"},null,8,Le)),a("div",Ve,[a("h5",Se,m(d.title),1),a("span",{class:I(["card-badge badge",i.badgeColor(d.resource_type)])},m(d.resource_type),3),a("div",Fe,[e.user.user_type=="super_admin"?(s(),l("span",{key:0,class:"card-edit badge bg-primary",onClick:x(f=>i.editResource(d.id),["stop"]),title:"Edit Resource",textContent:"✎"},null,8,Ee)):c("",!0),e.user.user_type=="super_admin"?(s(),l("span",{key:1,class:"card-delete badge bg-danger",onClick:x(f=>i.deleteResource(d.id),["stop"])}," X ",8,De)):c("",!0)])]),d.tags?(s(),l("div",Ie,[(s(!0),l(u,null,h(i.get_tags(d.tags),(f,F)=>(s(),l("span",{key:F,textContent:m(f),class:"press-link-tag badge rounded-pill bg-secondary me-2 px-3 py-2"},null,8,Te))),128))])):c("",!0)],8,$e))),128))]),R(n,{show:r.show_modal.edit,data:r.selected_resource,onClose:t[1]||(t[1]=d=>r.show_modal.edit=!1)},null,8,["show","data"]),R(o,{show:r.show_modal.add,onClose:t[2]||(t[2]=d=>r.show_modal.add=!1)},null,8,["show"])],64)}const Be=w(ye,[["render",Ae],["__scopeId","data-v-d4faf55a"]]),M=T({});M.component("resources",Be);M.use(g);M.mount("#app");
