import{m as k,s as m,_ as g,r as h,c as o,x as C,w as v,d,b as r,F as i,l as u,e as F,o as s,t as _,n as f,j as w,h as x}from"./_plugin-vue_export-helper-bd7be5eb.js";import{M as A}from"./ModalShowCountForm-113aae29.js";import{B}from"./ButterflyAnimation-a482c4c9.js";const D={name:"ValidateForms",components:{ModalShowCountForm:A,ButterflyAnimation:B},data(){return{headers:["id","name","location","state","district","latitude","longitude","no_of_species","date","start_time","end_time","status"],statuses:["all","pending","approved","rejected","duplicate"],selected_status:"pending",showModal:!1,selectedFormID:-1}},computed:{...k({user:e=>e.auth.user,is_super_admin:e=>e.auth.is_super_admin,all_data:e=>e.count_forms.all_data,loading:e=>e.count_forms.loading}),filtered_data(){let e=[];return this.all_data.forEach(a=>{a.date.includes("2023-09")&&e.push({...a,no_of_species:a.species_list.length})}),this.selected_status!="all"&&(e=e.filter(a=>a.status==this.selected_status)),e},selected_form(){return this.selectedFormID==-1?{}:this.all_data.find(e=>e.id==this.selectedFormID)}},watch:{},mounted(){m.dispatch("count_forms/getAllData")},methods:{selectForm(e){this.selectedFormID=e,this.showModal=!0},showApproveBtn(e){return e.status=="pending"},showDeleteBtn(e){return e.status!="approved"},tableRowColor(e){let a="table-secondary";switch(e.status){case"pending":a="table-primary";break;case"approved":a="table-success text-success";break;case"duplicate":a="table-warning";break;case"rejected":a="table-danger text-danger";break}return a},async approveForm(e){confirm("Are you sure you want to Approve this Form?")&&await m.dispatch("count_forms/approveForm",e)},async deleteForm(e){confirm("Are you sure you want to delete this Form?")&&await m.dispatch("count_forms/deleteForm",e)},closeModal(){this.selectedForm={},this.showModal=!1}}},M={class:"text"},V={class:"container-fluid validate-forms-container"},j={class:"d-flex justify-content-center bg-dark p-2"},I=["textContent","onClick"],N={class:"table table-sm"},S={class:"bg-success text-warning"},E=["textContent"],R={key:0},z={class:"table-secondary"},L=["textContent","onClick"],T={key:0,class:"bg-secondary d-flex justify-content-around"},q=["onClick"],G=["onClick"];function H(e,a,K,O,l,n){const b=h("ButterflyAnimation"),y=h("modal-show-count-form");return s(),o(i,null,[e.loading?(s(),C(b,{key:0},{default:v(()=>[r("div",M,_(e.loading),1)]),_:1})):d("",!0),r("div",V,[r("div",j,[(s(!0),o(i,null,u(l.statuses,t=>(s(),o("button",{key:t,class:f(["btn btn-sm",t==l.selected_status?"btn-success":"btn-outline-success bg-light"]),textContent:_(t),onClick:c=>l.selected_status=t},null,10,I))),128))]),r("table",N,[r("thead",S,[r("tr",null,[(s(!0),o(i,null,u(l.headers,t=>(s(),o("th",{key:t,textContent:_(t)},null,8,E))),128)),e.is_super_admin?(s(),o("th",R,"Actions")):d("",!0)])]),r("tbody",z,[(s(!0),o(i,null,u(n.filtered_data,t=>(s(),o("tr",{key:t.id,class:f(n.tableRowColor(t))},[(s(!0),o(i,null,u(l.headers,c=>(s(),o("td",{key:c,textContent:_(t[c]),onClick:P=>n.selectForm(t.id)},null,8,L))),128)),e.is_super_admin?(s(),o("td",T,[n.showApproveBtn(t)?(s(),o("button",{key:0,class:"btn btn-sm btn-success",onClick:c=>n.approveForm(t)}," Approve ",8,q)):d("",!0),w(" Â  "),n.showDeleteBtn(t)?(s(),o("button",{key:1,class:"btn btn-sm btn-danger",onClick:c=>n.deleteForm(t)}," Delete ",8,G)):d("",!0)])):d("",!0)],2))),128))])])]),F(y,{show:l.showModal,form_data:n.selected_form,onClose:n.closeModal},null,8,["show","form_data","onClose"])],64)}const J=g(D,[["render",H],["__scopeId","data-v-952ddbf0"]]),p=x({});p.component("ValidateForms",J);p.use(m);p.mount("#app");
